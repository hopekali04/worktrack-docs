<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Comprehensive documentation for WorkTrack - your productivity companion"><meta name=author content="Hope Kalitera"><link href=https://worktrack-docs.example.com/API/ rel=canonical><link href=../Architecture/ rel=prev><link href=../ideas/ rel=next><link rel=icon href=../assets/favicon.ico><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.21"><title>API Reference - WorkTrack Documentation</title><link rel=stylesheet href=../assets/stylesheets/main.2a3383ac.min.css><link rel=stylesheet href=../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Inter:300,300i,400,400i,700,700i%7CJetBrains+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Inter";--md-code-font:"JetBrains Mono"}</style><link rel=stylesheet href=../assets/css/custom.css><link rel=stylesheet href=../assets/css/print.css><script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=deep-purple> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#api-documentation class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> </div> <header class="md-header md-header--shadow md-header--lifted" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=.. title="WorkTrack Documentation" class="md-header__button md-logo" aria-label="WorkTrack Documentation" data-md-component=logo> <img src=../assets/logo.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> WorkTrack Documentation </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> API Reference </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=deep-purple aria-label="Switch to dark mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=deep-purple aria-label="Switch to light mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <a href=javascript:void(0) class="md-search__icon md-icon" title=Share aria-label=Share data-clipboard data-clipboard-text data-md-component=search-share tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg> </a> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/hopekali04/worktrack-docs title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> worktrack-docs </div> </a> </div> </nav> <nav class=md-tabs aria-label=Tabs data-md-component=tabs> <div class=md-grid> <ul class=md-tabs__list> <li class=md-tabs__item> <a href=../Index/ class=md-tabs__link> Home </a> </li> <li class=md-tabs__item> <a href=../SETUP/ class=md-tabs__link> Getting Started </a> </li> <li class="md-tabs__item md-tabs__item--active"> <a href=../Architecture/ class=md-tabs__link> Technical Documentation </a> </li> <li class=md-tabs__item> <a href=../ideas/ class=md-tabs__link> Resources </a> </li> </ul> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=.. title="WorkTrack Documentation" class="md-nav__button md-logo" aria-label="WorkTrack Documentation" data-md-component=logo> <img src=../assets/logo.svg alt=logo> </a> WorkTrack Documentation </label> <div class=md-nav__source> <a href=https://github.com/hopekali04/worktrack-docs title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> worktrack-docs </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Index/ class=md-nav__link> <span class=md-ellipsis> Home </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> <span class=md-ellipsis> Getting Started </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Getting Started </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../SETUP/ class=md-nav__link> <span class=md-ellipsis> Setup Guide </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3 checked> <label class=md-nav__link for=__nav_3 id=__nav_3_label tabindex> <span class=md-ellipsis> Technical Documentation </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=true> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Technical Documentation </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../Architecture/ class=md-nav__link> <span class=md-ellipsis> Architecture </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> API Reference </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> API Reference </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#overview class=md-nav__link> <span class=md-ellipsis> Overview </span> </a> </li> <li class=md-nav__item> <a href=#data-models class=md-nav__link> <span class=md-ellipsis> Data Models </span> </a> <nav class=md-nav aria-label="Data Models"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#core-enums class=md-nav__link> <span class=md-ellipsis> Core Enums </span> </a> <nav class=md-nav aria-label="Core Enums"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#workoutcategory class=md-nav__link> <span class=md-ellipsis> WorkoutCategory </span> </a> </li> <li class=md-nav__item> <a href=#equipmenttype class=md-nav__link> <span class=md-ellipsis> EquipmentType </span> </a> </li> <li class=md-nav__item> <a href=#musclegroup class=md-nav__link> <span class=md-ellipsis> MuscleGroup </span> </a> </li> <li class=md-nav__item> <a href=#activitytag class=md-nav__link> <span class=md-ellipsis> ActivityTag </span> </a> </li> <li class=md-nav__item> <a href=#unitsystem class=md-nav__link> <span class=md-ellipsis> UnitSystem </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#user-profile class=md-nav__link> <span class=md-ellipsis> User Profile </span> </a> </li> <li class=md-nav__item> <a href=#workout-type-exercise-definition class=md-nav__link> <span class=md-ellipsis> Workout Type (Exercise Definition) </span> </a> </li> <li class=md-nav__item> <a href=#workout-session class=md-nav__link> <span class=md-ellipsis> Workout Session </span> </a> </li> <li class=md-nav__item> <a href=#personal-record-future class=md-nav__link> <span class=md-ellipsis> Personal Record (Future) </span> </a> </li> <li class=md-nav__item> <a href=#goal-future class=md-nav__link> <span class=md-ellipsis> Goal (Future) </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#custom-hooks class=md-nav__link> <span class=md-ellipsis> Custom Hooks </span> </a> <nav class=md-nav aria-label="Custom Hooks"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#useworkouttypes class=md-nav__link> <span class=md-ellipsis> useWorkoutTypes </span> </a> </li> <li class=md-nav__item> <a href=#usesessions class=md-nav__link> <span class=md-ellipsis> useSessions </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#firebase-operations class=md-nav__link> <span class=md-ellipsis> Firebase Operations </span> </a> <nav class=md-nav aria-label="Firebase Operations"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#creating-data class=md-nav__link> <span class=md-ellipsis> Creating Data </span> </a> </li> <li class=md-nav__item> <a href=#reading-data class=md-nav__link> <span class=md-ellipsis> Reading Data </span> </a> </li> <li class=md-nav__item> <a href=#updating-data class=md-nav__link> <span class=md-ellipsis> Updating Data </span> </a> </li> <li class=md-nav__item> <a href=#deleting-data class=md-nav__link> <span class=md-ellipsis> Deleting Data </span> </a> </li> <li class=md-nav__item> <a href=#real-time-listeners class=md-nav__link> <span class=md-ellipsis> Real-Time Listeners </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#validation class=md-nav__link> <span class=md-ellipsis> Validation </span> </a> <nav class=md-nav aria-label=Validation> <ul class=md-nav__list> <li class=md-nav__item> <a href=#zod-schemas class=md-nav__link> <span class=md-ellipsis> Zod Schemas </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#error-handling class=md-nav__link> <span class=md-ellipsis> Error Handling </span> </a> <nav class=md-nav aria-label="Error Handling"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#firebase-errors class=md-nav__link> <span class=md-ellipsis> Firebase Errors </span> </a> </li> <li class=md-nav__item> <a href=#form-validation-errors class=md-nav__link> <span class=md-ellipsis> Form Validation Errors </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#optimistic-updates class=md-nav__link> <span class=md-ellipsis> Optimistic Updates </span> </a> </li> <li class=md-nav__item> <a href=#data-aggregation class=md-nav__link> <span class=md-ellipsis> Data Aggregation </span> </a> <nav class=md-nav aria-label="Data Aggregation"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#calculate-total-volume class=md-nav__link> <span class=md-ellipsis> Calculate Total Volume </span> </a> </li> <li class=md-nav__item> <a href=#calculate-personal-records class=md-nav__link> <span class=md-ellipsis> Calculate Personal Records </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#rate-limiting class=md-nav__link> <span class=md-ellipsis> Rate Limiting </span> </a> </li> <li class=md-nav__item> <a href=#best-practices class=md-nav__link> <span class=md-ellipsis> Best Practices </span> </a> <nav class=md-nav aria-label="Best Practices"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#1-always-check-authentication class=md-nav__link> <span class=md-ellipsis> 1. Always Check Authentication </span> </a> </li> <li class=md-nav__item> <a href=#2-use-typescript-types class=md-nav__link> <span class=md-ellipsis> 2. Use TypeScript Types </span> </a> </li> <li class=md-nav__item> <a href=#3-handle-loading-states class=md-nav__link> <span class=md-ellipsis> 3. Handle Loading States </span> </a> </li> <li class=md-nav__item> <a href=#4-validate-user-input class=md-nav__link> <span class=md-ellipsis> 4. Validate User Input </span> </a> </li> <li class=md-nav__item> <a href=#5-clean-up-listeners class=md-nav__link> <span class=md-ellipsis> 5. Clean Up Listeners </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#future-api-enhancements class=md-nav__link> <span class=md-ellipsis> Future API Enhancements </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <label class=md-nav__link for=__nav_4 id=__nav_4_label tabindex=0> <span class=md-ellipsis> Resources </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Resources </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../ideas/ class=md-nav__link> <span class=md-ellipsis> Ideas & Roadmap </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <a href=https://github.com/hopekali04/worktrack-docs/edit/main/docs/API.md title="Edit this page" class="md-content__button md-icon" rel=edit> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75z"/></svg> </a> <a href=https://github.com/hopekali04/worktrack-docs/raw/main/docs/API.md title="View source of this page" class="md-content__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0 8a5 5 0 0 1-5-5 5 5 0 0 1 5-5 5 5 0 0 1 5 5 5 5 0 0 1-5 5m0-12.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5"/></svg> </a> <h1 id=api-documentation>ðŸ”Œ API Documentation<a class=headerlink href=#api-documentation title="Permanent link">&para;</a></h1> <h2 id=overview>Overview<a class=headerlink href=#overview title="Permanent link">&para;</a></h2> <p>WorkTrack uses Firebase Firestore as its database with a client-side SDK. There are no custom REST or GraphQL endpoints. All data operations happen through Firebase's real-time database API, with React hooks providing a clean abstraction layer.</p> <h2 id=data-models>Data Models<a class=headerlink href=#data-models title="Permanent link">&para;</a></h2> <h3 id=core-enums>Core Enums<a class=headerlink href=#core-enums title="Permanent link">&para;</a></h3> <h4 id=workoutcategory>WorkoutCategory<a class=headerlink href=#workoutcategory title="Permanent link">&para;</a></h4> <div class="language-typescript highlight"><pre><span></span><code><span id=__span-0-1><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=kd>enum</span><span class=w> </span><span class=nx>WorkoutCategory</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-0-2><a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a><span class=w>  </span><span class=nx>UPPER</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;upper&quot;</span><span class=p>,</span><span class=w>       </span><span class=c1>// Upper body exercises</span>
</span><span id=__span-0-3><a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a><span class=w>  </span><span class=nx>LOWER</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;lower&quot;</span><span class=p>,</span><span class=w>       </span><span class=c1>// Lower body exercises</span>
</span><span id=__span-0-4><a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a><span class=w>  </span><span class=nx>FULL_BODY</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;full&quot;</span><span class=p>,</span><span class=w>    </span><span class=c1>// Full body compound movements</span>
</span><span id=__span-0-5><a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a><span class=w>  </span><span class=nx>CARDIO</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;cardio&quot;</span><span class=p>,</span><span class=w>     </span><span class=c1>// Cardiovascular exercises</span>
</span><span id=__span-0-6><a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a><span class=w>  </span><span class=nx>CORE</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;core&quot;</span><span class=p>,</span><span class=w>         </span><span class=c1>// Core and abs exercises</span>
</span><span id=__span-0-7><a id=__codelineno-0-7 name=__codelineno-0-7 href=#__codelineno-0-7></a><span class=p>}</span>
</span></code></pre></div> <h4 id=equipmenttype>EquipmentType<a class=headerlink href=#equipmenttype title="Permanent link">&para;</a></h4> <div class="language-typescript highlight"><pre><span></span><code><span id=__span-1-1><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=kd>enum</span><span class=w> </span><span class=nx>EquipmentType</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-1-2><a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a><span class=w>  </span><span class=nx>BODYWEIGHT</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;bodyweight&quot;</span><span class=p>,</span><span class=w>           </span><span class=c1>// Push-ups, pull-ups, etc.</span>
</span><span id=__span-1-3><a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a><span class=w>  </span><span class=nx>BARBELL</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;barbell&quot;</span><span class=p>,</span><span class=w>                 </span><span class=c1>// Barbell exercises</span>
</span><span id=__span-1-4><a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a><span class=w>  </span><span class=nx>DUMBBELL</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;dumbbell&quot;</span><span class=p>,</span><span class=w>               </span><span class=c1>// Dumbbell exercises</span>
</span><span id=__span-1-5><a id=__codelineno-1-5 name=__codelineno-1-5 href=#__codelineno-1-5></a><span class=w>  </span><span class=nx>MACHINE</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;machine&quot;</span><span class=p>,</span><span class=w>                 </span><span class=c1>// Weight machines</span>
</span><span id=__span-1-6><a id=__codelineno-1-6 name=__codelineno-1-6 href=#__codelineno-1-6></a><span class=w>  </span><span class=nx>CABLE</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;cable&quot;</span><span class=p>,</span><span class=w>                     </span><span class=c1>// Cable machines</span>
</span><span id=__span-1-7><a id=__codelineno-1-7 name=__codelineno-1-7 href=#__codelineno-1-7></a><span class=w>  </span><span class=nx>CARDIO_EQUIPMENT</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;cardio_equipment&quot;</span><span class=p>,</span><span class=w> </span><span class=c1>// Treadmill, bike, etc.</span>
</span><span id=__span-1-8><a id=__codelineno-1-8 name=__codelineno-1-8 href=#__codelineno-1-8></a><span class=w>  </span><span class=nx>OTHER</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;other&quot;</span><span class=p>,</span><span class=w>                     </span><span class=c1>// Resistance bands, kettlebells</span>
</span><span id=__span-1-9><a id=__codelineno-1-9 name=__codelineno-1-9 href=#__codelineno-1-9></a><span class=p>}</span>
</span></code></pre></div> <h4 id=musclegroup>MuscleGroup<a class=headerlink href=#musclegroup title="Permanent link">&para;</a></h4> <div class="language-typescript highlight"><pre><span></span><code><span id=__span-2-1><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=kd>enum</span><span class=w> </span><span class=nx>MuscleGroup</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-2-2><a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a><span class=w>  </span><span class=nx>CHEST</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;chest&quot;</span><span class=p>,</span>
</span><span id=__span-2-3><a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a><span class=w>  </span><span class=nx>BACK</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;back&quot;</span><span class=p>,</span>
</span><span id=__span-2-4><a id=__codelineno-2-4 name=__codelineno-2-4 href=#__codelineno-2-4></a><span class=w>  </span><span class=nx>SHOULDERS</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;shoulders&quot;</span><span class=p>,</span>
</span><span id=__span-2-5><a id=__codelineno-2-5 name=__codelineno-2-5 href=#__codelineno-2-5></a><span class=w>  </span><span class=nx>BICEPS</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;biceps&quot;</span><span class=p>,</span>
</span><span id=__span-2-6><a id=__codelineno-2-6 name=__codelineno-2-6 href=#__codelineno-2-6></a><span class=w>  </span><span class=nx>TRICEPS</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;triceps&quot;</span><span class=p>,</span>
</span><span id=__span-2-7><a id=__codelineno-2-7 name=__codelineno-2-7 href=#__codelineno-2-7></a><span class=w>  </span><span class=nx>FOREARMS</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;forearms&quot;</span><span class=p>,</span>
</span><span id=__span-2-8><a id=__codelineno-2-8 name=__codelineno-2-8 href=#__codelineno-2-8></a><span class=w>  </span><span class=nx>ABS</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;abs&quot;</span><span class=p>,</span>
</span><span id=__span-2-9><a id=__codelineno-2-9 name=__codelineno-2-9 href=#__codelineno-2-9></a><span class=w>  </span><span class=nx>OBLIQUES</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;obliques&quot;</span><span class=p>,</span>
</span><span id=__span-2-10><a id=__codelineno-2-10 name=__codelineno-2-10 href=#__codelineno-2-10></a><span class=w>  </span><span class=nx>QUADS</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;quads&quot;</span><span class=p>,</span>
</span><span id=__span-2-11><a id=__codelineno-2-11 name=__codelineno-2-11 href=#__codelineno-2-11></a><span class=w>  </span><span class=nx>HAMSTRINGS</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;hamstrings&quot;</span><span class=p>,</span>
</span><span id=__span-2-12><a id=__codelineno-2-12 name=__codelineno-2-12 href=#__codelineno-2-12></a><span class=w>  </span><span class=nx>GLUTES</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;glutes&quot;</span><span class=p>,</span>
</span><span id=__span-2-13><a id=__codelineno-2-13 name=__codelineno-2-13 href=#__codelineno-2-13></a><span class=w>  </span><span class=nx>CALVES</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;calves&quot;</span><span class=p>,</span>
</span><span id=__span-2-14><a id=__codelineno-2-14 name=__codelineno-2-14 href=#__codelineno-2-14></a><span class=w>  </span><span class=nx>CARDIO</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;cardio&quot;</span><span class=p>,</span>
</span><span id=__span-2-15><a id=__codelineno-2-15 name=__codelineno-2-15 href=#__codelineno-2-15></a><span class=p>}</span>
</span></code></pre></div> <h4 id=activitytag>ActivityTag<a class=headerlink href=#activitytag title="Permanent link">&para;</a></h4> <div class="language-typescript highlight"><pre><span></span><code><span id=__span-3-1><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=kd>enum</span><span class=w> </span><span class=nx>ActivityTag</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-3-2><a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a><span class=w>  </span><span class=nx>STRENGTH</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;strength&quot;</span><span class=p>,</span><span class=w>     </span><span class=c1>// Traditional strength training</span>
</span><span id=__span-3-3><a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a><span class=w>  </span><span class=nx>RUNNING</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;running&quot;</span><span class=p>,</span><span class=w>       </span><span class=c1>// Running activities</span>
</span><span id=__span-3-4><a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a><span class=w>  </span><span class=nx>SPRINTS</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;sprints&quot;</span><span class=p>,</span><span class=w>       </span><span class=c1>// Sprint training</span>
</span><span id=__span-3-5><a id=__codelineno-3-5 name=__codelineno-3-5 href=#__codelineno-3-5></a><span class=w>  </span><span class=nx>CYCLING</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;cycling&quot;</span><span class=p>,</span><span class=w>       </span><span class=c1>// Cycling activities</span>
</span><span id=__span-3-6><a id=__codelineno-3-6 name=__codelineno-3-6 href=#__codelineno-3-6></a><span class=w>  </span><span class=nx>SWIMMING</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;swimming&quot;</span><span class=p>,</span><span class=w>     </span><span class=c1>// Swimming activities</span>
</span><span id=__span-3-7><a id=__codelineno-3-7 name=__codelineno-3-7 href=#__codelineno-3-7></a><span class=w>  </span><span class=nx>HIIT</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;hiit&quot;</span><span class=p>,</span><span class=w>            </span><span class=c1>// High-intensity interval training</span>
</span><span id=__span-3-8><a id=__codelineno-3-8 name=__codelineno-3-8 href=#__codelineno-3-8></a><span class=w>  </span><span class=nx>STRETCHING</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;stretching&quot;</span><span class=p>,</span><span class=w> </span><span class=c1>// Flexibility and mobility</span>
</span><span id=__span-3-9><a id=__codelineno-3-9 name=__codelineno-3-9 href=#__codelineno-3-9></a><span class=p>}</span>
</span></code></pre></div> <h4 id=unitsystem>UnitSystem<a class=headerlink href=#unitsystem title="Permanent link">&para;</a></h4> <div class="language-typescript highlight"><pre><span></span><code><span id=__span-4-1><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=kd>enum</span><span class=w> </span><span class=nx>UnitSystem</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-4-2><a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a><span class=w>  </span><span class=nx>METRIC</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;metric&quot;</span><span class=p>,</span><span class=w>     </span><span class=c1>// kg, km</span>
</span><span id=__span-4-3><a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a><span class=w>  </span><span class=nx>IMPERIAL</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=s2>&quot;imperial&quot;</span><span class=p>,</span><span class=w> </span><span class=c1>// lbs, miles</span>
</span><span id=__span-4-4><a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a><span class=p>}</span>
</span></code></pre></div> <h3 id=user-profile>User Profile<a class=headerlink href=#user-profile title="Permanent link">&para;</a></h3> <p><strong>Collection</strong>: <code>users/{userId}</code></p> <div class="language-typescript highlight"><pre><span></span><code><span id=__span-5-1><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=kd>interface</span><span class=w> </span><span class=nx>UserProfile</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-5-2><a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a><span class=w>  </span><span class=nx>uid</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span><span class=w>                    </span><span class=c1>// Firebase Auth UID</span>
</span><span id=__span-5-3><a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a><span class=w>  </span><span class=nx>email</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span><span class=w>                  </span><span class=c1>// User email address</span>
</span><span id=__span-5-4><a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a><span class=w>  </span><span class=nx>displayName</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=kc>null</span><span class=p>;</span><span class=w>     </span><span class=c1>// User&#39;s display name</span>
</span><span id=__span-5-5><a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a><span class=w>  </span><span class=nx>photoURL</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=kc>null</span><span class=p>;</span><span class=w>        </span><span class=c1>// Profile photo URL</span>
</span><span id=__span-5-6><a id=__codelineno-5-6 name=__codelineno-5-6 href=#__codelineno-5-6></a><span class=w>  </span><span class=nx>createdAt</span><span class=o>:</span><span class=w> </span><span class=kt>Timestamp</span><span class=p>;</span><span class=w>           </span><span class=c1>// Account creation date</span>
</span><span id=__span-5-7><a id=__codelineno-5-7 name=__codelineno-5-7 href=#__codelineno-5-7></a><span class=w>  </span><span class=nx>updatedAt</span><span class=o>:</span><span class=w> </span><span class=kt>Timestamp</span><span class=p>;</span><span class=w>           </span><span class=c1>// Last profile update</span>
</span><span id=__span-5-8><a id=__codelineno-5-8 name=__codelineno-5-8 href=#__codelineno-5-8></a><span class=w>  </span><span class=nx>settings</span><span class=o>:</span><span class=w> </span><span class=kt>UserSettings</span><span class=p>;</span><span class=w>         </span><span class=c1>// User preferences</span>
</span><span id=__span-5-9><a id=__codelineno-5-9 name=__codelineno-5-9 href=#__codelineno-5-9></a><span class=w>  </span><span class=nx>onboardingCompleted</span><span class=o>:</span><span class=w> </span><span class=kt>boolean</span><span class=p>;</span><span class=w>   </span><span class=c1>// Whether user completed setup</span>
</span><span id=__span-5-10><a id=__codelineno-5-10 name=__codelineno-5-10 href=#__codelineno-5-10></a><span class=p>}</span>
</span><span id=__span-5-11><a id=__codelineno-5-11 name=__codelineno-5-11 href=#__codelineno-5-11></a>
</span><span id=__span-5-12><a id=__codelineno-5-12 name=__codelineno-5-12 href=#__codelineno-5-12></a><span class=kd>interface</span><span class=w> </span><span class=nx>UserSettings</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-5-13><a id=__codelineno-5-13 name=__codelineno-5-13 href=#__codelineno-5-13></a><span class=w>  </span><span class=nx>unitSystem</span><span class=o>:</span><span class=w> </span><span class=kt>UnitSystem</span><span class=p>;</span><span class=w>         </span><span class=c1>// Metric or imperial</span>
</span><span id=__span-5-14><a id=__codelineno-5-14 name=__codelineno-5-14 href=#__codelineno-5-14></a><span class=w>  </span><span class=nx>darkMode</span><span class=o>:</span><span class=w> </span><span class=kt>boolean</span><span class=p>;</span><span class=w>              </span><span class=c1>// Dark mode preference</span>
</span><span id=__span-5-15><a id=__codelineno-5-15 name=__codelineno-5-15 href=#__codelineno-5-15></a><span class=w>  </span><span class=nx>defaultRestTime</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span><span class=w>        </span><span class=c1>// Default rest time in seconds</span>
</span><span id=__span-5-16><a id=__codelineno-5-16 name=__codelineno-5-16 href=#__codelineno-5-16></a><span class=w>  </span><span class=nx>notificationsEnabled</span><span class=o>:</span><span class=w> </span><span class=kt>boolean</span><span class=p>;</span><span class=w>  </span><span class=c1>// Push notification preference</span>
</span><span id=__span-5-17><a id=__codelineno-5-17 name=__codelineno-5-17 href=#__codelineno-5-17></a><span class=p>}</span>
</span></code></pre></div> <p><strong>Security Rules</strong>: <div class="language-javascript highlight"><pre><span></span><code><span id=__span-6-1><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=c1>// Users can only read/write their own profile</span>
</span><span id=__span-6-2><a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a><span class=nx>allow</span><span class=w> </span><span class=nx>read</span><span class=p>,</span><span class=w> </span><span class=nx>write</span><span class=o>:</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=nx>request</span><span class=p>.</span><span class=nx>auth</span><span class=p>.</span><span class=nx>uid</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=nx>userId</span><span class=p>;</span>
</span></code></pre></div></p> <h3 id=workout-type-exercise-definition>Workout Type (Exercise Definition)<a class=headerlink href=#workout-type-exercise-definition title="Permanent link">&para;</a></h3> <p><strong>Collection</strong>: <code>workoutTypes/{typeId}</code></p> <div class="language-typescript highlight"><pre><span></span><code><span id=__span-7-1><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a><span class=kd>interface</span><span class=w> </span><span class=nx>WorkoutType</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-7-2><a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a><span class=w>  </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span><span class=w>                     </span><span class=c1>// Firestore document ID</span>
</span><span id=__span-7-3><a id=__codelineno-7-3 name=__codelineno-7-3 href=#__codelineno-7-3></a><span class=w>  </span><span class=nx>userId</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span><span class=w>                 </span><span class=c1>// Owner of this workout type</span>
</span><span id=__span-7-4><a id=__codelineno-7-4 name=__codelineno-7-4 href=#__codelineno-7-4></a><span class=w>  </span><span class=nx>name</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span><span class=w>                   </span><span class=c1>// Exercise name (e.g., &quot;Bench Press&quot;)</span>
</span><span id=__span-7-5><a id=__codelineno-7-5 name=__codelineno-7-5 href=#__codelineno-7-5></a><span class=w>  </span><span class=nx>category</span><span class=o>:</span><span class=w> </span><span class=kt>WorkoutCategory</span><span class=p>;</span><span class=w>      </span><span class=c1>// Exercise category</span>
</span><span id=__span-7-6><a id=__codelineno-7-6 name=__codelineno-7-6 href=#__codelineno-7-6></a><span class=w>  </span><span class=nx>equipment</span><span class=o>:</span><span class=w> </span><span class=kt>EquipmentType</span><span class=p>;</span><span class=w>       </span><span class=c1>// Required equipment</span>
</span><span id=__span-7-7><a id=__codelineno-7-7 name=__codelineno-7-7 href=#__codelineno-7-7></a><span class=w>  </span><span class=nx>muscleGroups</span><span class=o>:</span><span class=w> </span><span class=kt>MuscleGroup</span><span class=p>[];</span><span class=w>    </span><span class=c1>// Target muscle groups</span>
</span><span id=__span-7-8><a id=__codelineno-7-8 name=__codelineno-7-8 href=#__codelineno-7-8></a><span class=w>  </span><span class=nx>activityTags</span><span class=o>:</span><span class=w> </span><span class=kt>ActivityTag</span><span class=p>[];</span><span class=w>    </span><span class=c1>// Activity classifications</span>
</span><span id=__span-7-9><a id=__codelineno-7-9 name=__codelineno-7-9 href=#__codelineno-7-9></a><span class=w>  </span><span class=nx>isDefault</span><span class=o>:</span><span class=w> </span><span class=kt>boolean</span><span class=p>;</span><span class=w>             </span><span class=c1>// Whether this is a system default</span>
</span><span id=__span-7-10><a id=__codelineno-7-10 name=__codelineno-7-10 href=#__codelineno-7-10></a><span class=w>  </span><span class=nx>createdAt</span><span class=o>:</span><span class=w> </span><span class=kt>Timestamp</span><span class=p>;</span><span class=w>           </span><span class=c1>// Creation timestamp</span>
</span><span id=__span-7-11><a id=__codelineno-7-11 name=__codelineno-7-11 href=#__codelineno-7-11></a><span class=w>  </span><span class=nx>updatedAt</span><span class=o>:</span><span class=w> </span><span class=kt>Timestamp</span><span class=p>;</span><span class=w>           </span><span class=c1>// Last update timestamp</span>
</span><span id=__span-7-12><a id=__codelineno-7-12 name=__codelineno-7-12 href=#__codelineno-7-12></a><span class=p>}</span>
</span></code></pre></div> <p><strong>Form Input Type</strong> (for creating new workout types): <div class="language-typescript highlight"><pre><span></span><code><span id=__span-8-1><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a><span class=kd>interface</span><span class=w> </span><span class=nx>WorkoutTypeInput</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-8-2><a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a><span class=w>  </span><span class=nx>name</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-8-3><a id=__codelineno-8-3 name=__codelineno-8-3 href=#__codelineno-8-3></a><span class=w>  </span><span class=nx>category</span><span class=o>:</span><span class=w> </span><span class=kt>WorkoutCategory</span><span class=p>;</span>
</span><span id=__span-8-4><a id=__codelineno-8-4 name=__codelineno-8-4 href=#__codelineno-8-4></a><span class=w>  </span><span class=nx>equipment</span><span class=o>:</span><span class=w> </span><span class=kt>EquipmentType</span><span class=p>;</span>
</span><span id=__span-8-5><a id=__codelineno-8-5 name=__codelineno-8-5 href=#__codelineno-8-5></a><span class=w>  </span><span class=nx>muscleGroups</span><span class=o>:</span><span class=w> </span><span class=kt>MuscleGroup</span><span class=p>[];</span>
</span><span id=__span-8-6><a id=__codelineno-8-6 name=__codelineno-8-6 href=#__codelineno-8-6></a><span class=w>  </span><span class=nx>activityTags</span><span class=o>:</span><span class=w> </span><span class=kt>ActivityTag</span><span class=p>[];</span>
</span><span id=__span-8-7><a id=__codelineno-8-7 name=__codelineno-8-7 href=#__codelineno-8-7></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Security Rules</strong>: <div class="language-javascript highlight"><pre><span></span><code><span id=__span-9-1><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a><span class=c1>// Users can read/write their own workout types</span>
</span><span id=__span-9-2><a id=__codelineno-9-2 name=__codelineno-9-2 href=#__codelineno-9-2></a><span class=nx>allow</span><span class=w> </span><span class=nx>read</span><span class=p>,</span><span class=w> </span><span class=nx>write</span><span class=o>:</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=nx>request</span><span class=p>.</span><span class=nx>auth</span><span class=p>.</span><span class=nx>uid</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=nx>resource</span><span class=p>.</span><span class=nx>data</span><span class=p>.</span><span class=nx>userId</span><span class=p>;</span>
</span><span id=__span-9-3><a id=__codelineno-9-3 name=__codelineno-9-3 href=#__codelineno-9-3></a><span class=nx>allow</span><span class=w> </span><span class=nx>create</span><span class=o>:</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=nx>request</span><span class=p>.</span><span class=nx>auth</span><span class=p>.</span><span class=nx>uid</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=nx>request</span><span class=p>.</span><span class=nx>resource</span><span class=p>.</span><span class=nx>data</span><span class=p>.</span><span class=nx>userId</span><span class=p>;</span>
</span></code></pre></div></p> <p><strong>Indexes</strong>: - <code>userId</code> (ascending) - for querying user's workout types - <code>userId, category</code> (composite) - for filtering by category - <code>userId, muscleGroups</code> (array-contains) - for filtering by muscle group</p> <h3 id=workout-session>Workout Session<a class=headerlink href=#workout-session title="Permanent link">&para;</a></h3> <p><strong>Collection</strong>: <code>workoutSessions/{sessionId}</code></p> <div class="language-typescript highlight"><pre><span></span><code><span id=__span-10-1><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a><span class=kd>interface</span><span class=w> </span><span class=nx>WorkoutSession</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-10-2><a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a><span class=w>  </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span><span class=w>                     </span><span class=c1>// Firestore document ID</span>
</span><span id=__span-10-3><a id=__codelineno-10-3 name=__codelineno-10-3 href=#__codelineno-10-3></a><span class=w>  </span><span class=nx>userId</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span><span class=w>                 </span><span class=c1>// Owner of this session</span>
</span><span id=__span-10-4><a id=__codelineno-10-4 name=__codelineno-10-4 href=#__codelineno-10-4></a><span class=w>  </span><span class=nx>date</span><span class=o>:</span><span class=w> </span><span class=kt>Timestamp</span><span class=p>;</span><span class=w>                </span><span class=c1>// When workout occurred</span>
</span><span id=__span-10-5><a id=__codelineno-10-5 name=__codelineno-10-5 href=#__codelineno-10-5></a><span class=w>  </span><span class=nx>duration</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span><span class=w>               </span><span class=c1>// Duration in minutes</span>
</span><span id=__span-10-6><a id=__codelineno-10-6 name=__codelineno-10-6 href=#__codelineno-10-6></a><span class=w>  </span><span class=nx>exercises</span><span class=o>:</span><span class=w> </span><span class=kt>ExerciseEntry</span><span class=p>[];</span><span class=w>     </span><span class=c1>// List of exercises performed</span>
</span><span id=__span-10-7><a id=__codelineno-10-7 name=__codelineno-10-7 href=#__codelineno-10-7></a><span class=w>  </span><span class=nx>notes?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span><span class=w>                 </span><span class=c1>// Optional session notes</span>
</span><span id=__span-10-8><a id=__codelineno-10-8 name=__codelineno-10-8 href=#__codelineno-10-8></a><span class=w>  </span><span class=nx>createdAt</span><span class=o>:</span><span class=w> </span><span class=kt>Timestamp</span><span class=p>;</span><span class=w>           </span><span class=c1>// When logged in system</span>
</span><span id=__span-10-9><a id=__codelineno-10-9 name=__codelineno-10-9 href=#__codelineno-10-9></a><span class=w>  </span><span class=nx>updatedAt</span><span class=o>:</span><span class=w> </span><span class=kt>Timestamp</span><span class=p>;</span><span class=w>           </span><span class=c1>// Last update</span>
</span><span id=__span-10-10><a id=__codelineno-10-10 name=__codelineno-10-10 href=#__codelineno-10-10></a><span class=p>}</span>
</span><span id=__span-10-11><a id=__codelineno-10-11 name=__codelineno-10-11 href=#__codelineno-10-11></a>
</span><span id=__span-10-12><a id=__codelineno-10-12 name=__codelineno-10-12 href=#__codelineno-10-12></a><span class=kd>interface</span><span class=w> </span><span class=nx>ExerciseEntry</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-10-13><a id=__codelineno-10-13 name=__codelineno-10-13 href=#__codelineno-10-13></a><span class=w>  </span><span class=nx>workoutTypeId</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span><span class=w>          </span><span class=c1>// Reference to WorkoutType</span>
</span><span id=__span-10-14><a id=__codelineno-10-14 name=__codelineno-10-14 href=#__codelineno-10-14></a><span class=w>  </span><span class=nx>workoutTypeName</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span><span class=w>        </span><span class=c1>// Cached name for display</span>
</span><span id=__span-10-15><a id=__codelineno-10-15 name=__codelineno-10-15 href=#__codelineno-10-15></a><span class=w>  </span><span class=nx>sets</span><span class=o>:</span><span class=w> </span><span class=kt>SetEntry</span><span class=p>[];</span><span class=w>               </span><span class=c1>// List of sets performed</span>
</span><span id=__span-10-16><a id=__codelineno-10-16 name=__codelineno-10-16 href=#__codelineno-10-16></a><span class=w>  </span><span class=nx>notes?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span><span class=w>                 </span><span class=c1>// Exercise-specific notes</span>
</span><span id=__span-10-17><a id=__codelineno-10-17 name=__codelineno-10-17 href=#__codelineno-10-17></a><span class=p>}</span>
</span><span id=__span-10-18><a id=__codelineno-10-18 name=__codelineno-10-18 href=#__codelineno-10-18></a>
</span><span id=__span-10-19><a id=__codelineno-10-19 name=__codelineno-10-19 href=#__codelineno-10-19></a><span class=kd>interface</span><span class=w> </span><span class=nx>SetEntry</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-10-20><a id=__codelineno-10-20 name=__codelineno-10-20 href=#__codelineno-10-20></a><span class=w>  </span><span class=nx>reps?</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span><span class=w>                  </span><span class=c1>// Number of repetitions</span>
</span><span id=__span-10-21><a id=__codelineno-10-21 name=__codelineno-10-21 href=#__codelineno-10-21></a><span class=w>  </span><span class=nx>weight?</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span><span class=w>                </span><span class=c1>// Weight used (kg or lbs)</span>
</span><span id=__span-10-22><a id=__codelineno-10-22 name=__codelineno-10-22 href=#__codelineno-10-22></a><span class=w>  </span><span class=nx>rpe?</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span><span class=w>                   </span><span class=c1>// Rate of Perceived Exertion (1-10)</span>
</span><span id=__span-10-23><a id=__codelineno-10-23 name=__codelineno-10-23 href=#__codelineno-10-23></a><span class=w>  </span><span class=nx>distance?</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span><span class=w>              </span><span class=c1>// Distance (km or miles) for cardio</span>
</span><span id=__span-10-24><a id=__codelineno-10-24 name=__codelineno-10-24 href=#__codelineno-10-24></a><span class=w>  </span><span class=nx>time?</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span><span class=w>                  </span><span class=c1>// Time (seconds) for cardio/timed exercises</span>
</span><span id=__span-10-25><a id=__codelineno-10-25 name=__codelineno-10-25 href=#__codelineno-10-25></a><span class=p>}</span>
</span></code></pre></div> <p><strong>Form Input Types</strong> (for creating new sessions): <div class="language-typescript highlight"><pre><span></span><code><span id=__span-11-1><a id=__codelineno-11-1 name=__codelineno-11-1 href=#__codelineno-11-1></a><span class=kd>interface</span><span class=w> </span><span class=nx>WorkoutSessionInput</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-11-2><a id=__codelineno-11-2 name=__codelineno-11-2 href=#__codelineno-11-2></a><span class=w>  </span><span class=nx>date</span><span class=o>:</span><span class=w> </span><span class=kt>Date</span><span class=p>;</span>
</span><span id=__span-11-3><a id=__codelineno-11-3 name=__codelineno-11-3 href=#__codelineno-11-3></a><span class=w>  </span><span class=nx>duration</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
</span><span id=__span-11-4><a id=__codelineno-11-4 name=__codelineno-11-4 href=#__codelineno-11-4></a><span class=w>  </span><span class=nx>notes?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-11-5><a id=__codelineno-11-5 name=__codelineno-11-5 href=#__codelineno-11-5></a><span class=w>  </span><span class=nx>exercises</span><span class=o>:</span><span class=w> </span><span class=kt>ExerciseEntryInput</span><span class=p>[];</span>
</span><span id=__span-11-6><a id=__codelineno-11-6 name=__codelineno-11-6 href=#__codelineno-11-6></a><span class=p>}</span>
</span><span id=__span-11-7><a id=__codelineno-11-7 name=__codelineno-11-7 href=#__codelineno-11-7></a>
</span><span id=__span-11-8><a id=__codelineno-11-8 name=__codelineno-11-8 href=#__codelineno-11-8></a><span class=kd>interface</span><span class=w> </span><span class=nx>ExerciseEntryInput</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-11-9><a id=__codelineno-11-9 name=__codelineno-11-9 href=#__codelineno-11-9></a><span class=w>  </span><span class=nx>workoutTypeId</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-11-10><a id=__codelineno-11-10 name=__codelineno-11-10 href=#__codelineno-11-10></a><span class=w>  </span><span class=nx>sets</span><span class=o>:</span><span class=w> </span><span class=kt>SetEntryInput</span><span class=p>[];</span>
</span><span id=__span-11-11><a id=__codelineno-11-11 name=__codelineno-11-11 href=#__codelineno-11-11></a><span class=w>  </span><span class=nx>notes?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-11-12><a id=__codelineno-11-12 name=__codelineno-11-12 href=#__codelineno-11-12></a><span class=p>}</span>
</span><span id=__span-11-13><a id=__codelineno-11-13 name=__codelineno-11-13 href=#__codelineno-11-13></a>
</span><span id=__span-11-14><a id=__codelineno-11-14 name=__codelineno-11-14 href=#__codelineno-11-14></a><span class=kd>interface</span><span class=w> </span><span class=nx>SetEntryInput</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-11-15><a id=__codelineno-11-15 name=__codelineno-11-15 href=#__codelineno-11-15></a><span class=w>  </span><span class=nx>reps?</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
</span><span id=__span-11-16><a id=__codelineno-11-16 name=__codelineno-11-16 href=#__codelineno-11-16></a><span class=w>  </span><span class=nx>weight?</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
</span><span id=__span-11-17><a id=__codelineno-11-17 name=__codelineno-11-17 href=#__codelineno-11-17></a><span class=w>  </span><span class=nx>rpe?</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
</span><span id=__span-11-18><a id=__codelineno-11-18 name=__codelineno-11-18 href=#__codelineno-11-18></a><span class=w>  </span><span class=nx>distance?</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
</span><span id=__span-11-19><a id=__codelineno-11-19 name=__codelineno-11-19 href=#__codelineno-11-19></a><span class=w>  </span><span class=nx>time?</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span>
</span><span id=__span-11-20><a id=__codelineno-11-20 name=__codelineno-11-20 href=#__codelineno-11-20></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Security Rules</strong>: <div class="language-javascript highlight"><pre><span></span><code><span id=__span-12-1><a id=__codelineno-12-1 name=__codelineno-12-1 href=#__codelineno-12-1></a><span class=c1>// Users can read/write their own workout sessions</span>
</span><span id=__span-12-2><a id=__codelineno-12-2 name=__codelineno-12-2 href=#__codelineno-12-2></a><span class=nx>allow</span><span class=w> </span><span class=nx>read</span><span class=p>,</span><span class=w> </span><span class=nx>write</span><span class=o>:</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=nx>request</span><span class=p>.</span><span class=nx>auth</span><span class=p>.</span><span class=nx>uid</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=nx>resource</span><span class=p>.</span><span class=nx>data</span><span class=p>.</span><span class=nx>userId</span><span class=p>;</span>
</span><span id=__span-12-3><a id=__codelineno-12-3 name=__codelineno-12-3 href=#__codelineno-12-3></a><span class=nx>allow</span><span class=w> </span><span class=nx>create</span><span class=o>:</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=nx>request</span><span class=p>.</span><span class=nx>auth</span><span class=p>.</span><span class=nx>uid</span><span class=w> </span><span class=o>==</span><span class=w> </span><span class=nx>request</span><span class=p>.</span><span class=nx>resource</span><span class=p>.</span><span class=nx>data</span><span class=p>.</span><span class=nx>userId</span><span class=p>;</span>
</span></code></pre></div></p> <p><strong>Indexes</strong>: - <code>userId, date</code> (descending) - for chronological listing - <code>userId, createdAt</code> (descending) - for recent sessions</p> <h3 id=personal-record-future>Personal Record (Future)<a class=headerlink href=#personal-record-future title="Permanent link">&para;</a></h3> <p><strong>Collection</strong>: <code>personalRecords/{recordId}</code></p> <div class="language-typescript highlight"><pre><span></span><code><span id=__span-13-1><a id=__codelineno-13-1 name=__codelineno-13-1 href=#__codelineno-13-1></a><span class=kd>interface</span><span class=w> </span><span class=nx>PersonalRecord</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-13-2><a id=__codelineno-13-2 name=__codelineno-13-2 href=#__codelineno-13-2></a><span class=w>  </span><span class=nx>userId</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span><span class=w>                 </span><span class=c1>// Owner of this record</span>
</span><span id=__span-13-3><a id=__codelineno-13-3 name=__codelineno-13-3 href=#__codelineno-13-3></a><span class=w>  </span><span class=nx>workoutTypeId</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span><span class=w>          </span><span class=c1>// Which exercise</span>
</span><span id=__span-13-4><a id=__codelineno-13-4 name=__codelineno-13-4 href=#__codelineno-13-4></a><span class=w>  </span><span class=nx>workoutTypeName</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span><span class=w>        </span><span class=c1>// Cached name</span>
</span><span id=__span-13-5><a id=__codelineno-13-5 name=__codelineno-13-5 href=#__codelineno-13-5></a><span class=w>  </span><span class=nx>metric</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;weight&quot;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=s2>&quot;reps&quot;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=s2>&quot;volume&quot;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=s2>&quot;distance&quot;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=s2>&quot;time&quot;</span><span class=p>;</span>
</span><span id=__span-13-6><a id=__codelineno-13-6 name=__codelineno-13-6 href=#__codelineno-13-6></a><span class=w>  </span><span class=nx>value</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span><span class=w>                  </span><span class=c1>// The record value</span>
</span><span id=__span-13-7><a id=__codelineno-13-7 name=__codelineno-13-7 href=#__codelineno-13-7></a><span class=w>  </span><span class=nx>sessionId</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span><span class=w>              </span><span class=c1>// Which session achieved this</span>
</span><span id=__span-13-8><a id=__codelineno-13-8 name=__codelineno-13-8 href=#__codelineno-13-8></a><span class=w>  </span><span class=nx>date</span><span class=o>:</span><span class=w> </span><span class=kt>Timestamp</span><span class=p>;</span><span class=w>                </span><span class=c1>// When achieved</span>
</span><span id=__span-13-9><a id=__codelineno-13-9 name=__codelineno-13-9 href=#__codelineno-13-9></a><span class=w>  </span><span class=nx>createdAt</span><span class=o>:</span><span class=w> </span><span class=kt>Timestamp</span><span class=p>;</span><span class=w>           </span><span class=c1>// When recorded in system</span>
</span><span id=__span-13-10><a id=__codelineno-13-10 name=__codelineno-13-10 href=#__codelineno-13-10></a><span class=p>}</span>
</span></code></pre></div> <h3 id=goal-future>Goal (Future)<a class=headerlink href=#goal-future title="Permanent link">&para;</a></h3> <p><strong>Collection</strong>: <code>goals/{goalId}</code></p> <div class="language-typescript highlight"><pre><span></span><code><span id=__span-14-1><a id=__codelineno-14-1 name=__codelineno-14-1 href=#__codelineno-14-1></a><span class=kd>interface</span><span class=w> </span><span class=nx>Goal</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-14-2><a id=__codelineno-14-2 name=__codelineno-14-2 href=#__codelineno-14-2></a><span class=w>  </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-14-3><a id=__codelineno-14-3 name=__codelineno-14-3 href=#__codelineno-14-3></a><span class=w>  </span><span class=nx>userId</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span>
</span><span id=__span-14-4><a id=__codelineno-14-4 name=__codelineno-14-4 href=#__codelineno-14-4></a><span class=w>  </span><span class=nx>workoutTypeId?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span><span class=w>         </span><span class=c1>// Optional: specific exercise goal</span>
</span><span id=__span-14-5><a id=__codelineno-14-5 name=__codelineno-14-5 href=#__codelineno-14-5></a><span class=w>  </span><span class=nx>targetMetric</span><span class=o>:</span><span class=w> </span><span class=s2>&quot;weight&quot;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=s2>&quot;reps&quot;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=s2>&quot;volume&quot;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=s2>&quot;distance&quot;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=s2>&quot;time&quot;</span><span class=w> </span><span class=o>|</span><span class=w> </span><span class=s2>&quot;frequency&quot;</span><span class=p>;</span>
</span><span id=__span-14-6><a id=__codelineno-14-6 name=__codelineno-14-6 href=#__codelineno-14-6></a><span class=w>  </span><span class=nx>targetValue</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span><span class=w>            </span><span class=c1>// Goal target</span>
</span><span id=__span-14-7><a id=__codelineno-14-7 name=__codelineno-14-7 href=#__codelineno-14-7></a><span class=w>  </span><span class=nx>currentValue</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span><span class=w>           </span><span class=c1>// Current progress</span>
</span><span id=__span-14-8><a id=__codelineno-14-8 name=__codelineno-14-8 href=#__codelineno-14-8></a><span class=w>  </span><span class=nx>deadline?</span><span class=o>:</span><span class=w> </span><span class=kt>Timestamp</span><span class=p>;</span><span class=w>           </span><span class=c1>// Optional deadline</span>
</span><span id=__span-14-9><a id=__codelineno-14-9 name=__codelineno-14-9 href=#__codelineno-14-9></a><span class=w>  </span><span class=nx>completed</span><span class=o>:</span><span class=w> </span><span class=kt>boolean</span><span class=p>;</span><span class=w>             </span><span class=c1>// Whether goal is achieved</span>
</span><span id=__span-14-10><a id=__codelineno-14-10 name=__codelineno-14-10 href=#__codelineno-14-10></a><span class=w>  </span><span class=nx>createdAt</span><span class=o>:</span><span class=w> </span><span class=kt>Timestamp</span><span class=p>;</span>
</span><span id=__span-14-11><a id=__codelineno-14-11 name=__codelineno-14-11 href=#__codelineno-14-11></a><span class=w>  </span><span class=nx>updatedAt</span><span class=o>:</span><span class=w> </span><span class=kt>Timestamp</span><span class=p>;</span>
</span><span id=__span-14-12><a id=__codelineno-14-12 name=__codelineno-14-12 href=#__codelineno-14-12></a><span class=p>}</span>
</span></code></pre></div> <h2 id=custom-hooks>Custom Hooks<a class=headerlink href=#custom-hooks title="Permanent link">&para;</a></h2> <h3 id=useworkouttypes>useWorkoutTypes<a class=headerlink href=#useworkouttypes title="Permanent link">&para;</a></h3> <p>Fetches and manages workout types for the current user.</p> <div class="language-typescript highlight"><pre><span></span><code><span id=__span-15-1><a id=__codelineno-15-1 name=__codelineno-15-1 href=#__codelineno-15-1></a><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useWorkoutTypes</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@/lib/hooks/useWorkoutTypes&#39;</span><span class=p>;</span>
</span><span id=__span-15-2><a id=__codelineno-15-2 name=__codelineno-15-2 href=#__codelineno-15-2></a>
</span><span id=__span-15-3><a id=__codelineno-15-3 name=__codelineno-15-3 href=#__codelineno-15-3></a><span class=kd>function</span><span class=w> </span><span class=nx>MyComponent</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-15-4><a id=__codelineno-15-4 name=__codelineno-15-4 href=#__codelineno-15-4></a><span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=p>{</span><span class=w> </span>
</span><span id=__span-15-5><a id=__codelineno-15-5 name=__codelineno-15-5 href=#__codelineno-15-5></a><span class=w>    </span><span class=nx>data</span><span class=o>:</span><span class=w> </span><span class=kt>workoutTypes</span><span class=p>,</span><span class=w>     </span><span class=c1>// WorkoutType[]</span>
</span><span id=__span-15-6><a id=__codelineno-15-6 name=__codelineno-15-6 href=#__codelineno-15-6></a><span class=w>    </span><span class=nx>error</span><span class=p>,</span><span class=w>                  </span><span class=c1>// Error | undefined</span>
</span><span id=__span-15-7><a id=__codelineno-15-7 name=__codelineno-15-7 href=#__codelineno-15-7></a><span class=w>    </span><span class=nx>isLoading</span><span class=p>,</span><span class=w>             </span><span class=c1>// boolean</span>
</span><span id=__span-15-8><a id=__codelineno-15-8 name=__codelineno-15-8 href=#__codelineno-15-8></a><span class=w>    </span><span class=nx>mutate</span><span class=w>                 </span><span class=c1>// Function to refresh data</span>
</span><span id=__span-15-9><a id=__codelineno-15-9 name=__codelineno-15-9 href=#__codelineno-15-9></a><span class=w>  </span><span class=p>}</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useWorkoutTypes</span><span class=p>();</span>
</span><span id=__span-15-10><a id=__codelineno-15-10 name=__codelineno-15-10 href=#__codelineno-15-10></a>
</span><span id=__span-15-11><a id=__codelineno-15-11 name=__codelineno-15-11 href=#__codelineno-15-11></a><span class=w>  </span><span class=c1>// Use workoutTypes...</span>
</span><span id=__span-15-12><a id=__codelineno-15-12 name=__codelineno-15-12 href=#__codelineno-15-12></a><span class=p>}</span>
</span></code></pre></div> <p><strong>Features</strong>: - Automatically scoped to current user - Real-time updates via Firebase listener - Cached with SWR - Error handling built-in</p> <p><strong>Implementation</strong>: <div class="language-typescript highlight"><pre><span></span><code><span id=__span-16-1><a id=__codelineno-16-1 name=__codelineno-16-1 href=#__codelineno-16-1></a><span class=k>export</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>useWorkoutTypes</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-16-2><a id=__codelineno-16-2 name=__codelineno-16-2 href=#__codelineno-16-2></a><span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>user</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useAuth</span><span class=p>();</span>
</span><span id=__span-16-3><a id=__codelineno-16-3 name=__codelineno-16-3 href=#__codelineno-16-3></a>
</span><span id=__span-16-4><a id=__codelineno-16-4 name=__codelineno-16-4 href=#__codelineno-16-4></a><span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>data</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>,</span><span class=w> </span><span class=nx>isLoading</span><span class=p>,</span><span class=w> </span><span class=nx>mutate</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useSWR</span><span class=p>(</span>
</span><span id=__span-16-5><a id=__codelineno-16-5 name=__codelineno-16-5 href=#__codelineno-16-5></a><span class=w>    </span><span class=nx>user</span><span class=w> </span><span class=o>?</span><span class=w> </span><span class=p>[</span><span class=s1>&#39;workoutTypes&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>user</span><span class=p>.</span><span class=nx>uid</span><span class=p>]</span><span class=w> </span><span class=o>:</span><span class=w> </span><span class=kc>null</span><span class=p>,</span>
</span><span id=__span-16-6><a id=__codelineno-16-6 name=__codelineno-16-6 href=#__codelineno-16-6></a><span class=w>    </span><span class=k>async</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-16-7><a id=__codelineno-16-7 name=__codelineno-16-7 href=#__codelineno-16-7></a><span class=w>      </span><span class=kd>const</span><span class=w> </span><span class=nx>q</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>query</span><span class=p>(</span>
</span><span id=__span-16-8><a id=__codelineno-16-8 name=__codelineno-16-8 href=#__codelineno-16-8></a><span class=w>        </span><span class=nx>collection</span><span class=p>(</span><span class=nx>db</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;workoutTypes&#39;</span><span class=p>),</span>
</span><span id=__span-16-9><a id=__codelineno-16-9 name=__codelineno-16-9 href=#__codelineno-16-9></a><span class=w>        </span><span class=nx>where</span><span class=p>(</span><span class=s1>&#39;userId&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;==&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>user</span><span class=p>.</span><span class=nx>uid</span><span class=p>),</span>
</span><span id=__span-16-10><a id=__codelineno-16-10 name=__codelineno-16-10 href=#__codelineno-16-10></a><span class=w>        </span><span class=nx>orderBy</span><span class=p>(</span><span class=s1>&#39;name&#39;</span><span class=p>)</span>
</span><span id=__span-16-11><a id=__codelineno-16-11 name=__codelineno-16-11 href=#__codelineno-16-11></a><span class=w>      </span><span class=p>);</span>
</span><span id=__span-16-12><a id=__codelineno-16-12 name=__codelineno-16-12 href=#__codelineno-16-12></a><span class=w>      </span><span class=kd>const</span><span class=w> </span><span class=nx>snapshot</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>getDocs</span><span class=p>(</span><span class=nx>q</span><span class=p>);</span>
</span><span id=__span-16-13><a id=__codelineno-16-13 name=__codelineno-16-13 href=#__codelineno-16-13></a><span class=w>      </span><span class=k>return</span><span class=w> </span><span class=nx>snapshot</span><span class=p>.</span><span class=nx>docs</span><span class=p>.</span><span class=nx>map</span><span class=p>(</span><span class=nx>doc</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>({</span>
</span><span id=__span-16-14><a id=__codelineno-16-14 name=__codelineno-16-14 href=#__codelineno-16-14></a><span class=w>        </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=kt>doc.id</span><span class=p>,</span>
</span><span id=__span-16-15><a id=__codelineno-16-15 name=__codelineno-16-15 href=#__codelineno-16-15></a><span class=w>        </span><span class=p>...</span><span class=nx>doc</span><span class=p>.</span><span class=nx>data</span><span class=p>()</span>
</span><span id=__span-16-16><a id=__codelineno-16-16 name=__codelineno-16-16 href=#__codelineno-16-16></a><span class=w>      </span><span class=p>}))</span><span class=w> </span><span class=kr>as</span><span class=w> </span><span class=nx>WorkoutType</span><span class=p>[];</span>
</span><span id=__span-16-17><a id=__codelineno-16-17 name=__codelineno-16-17 href=#__codelineno-16-17></a><span class=w>    </span><span class=p>}</span>
</span><span id=__span-16-18><a id=__codelineno-16-18 name=__codelineno-16-18 href=#__codelineno-16-18></a><span class=w>  </span><span class=p>);</span>
</span><span id=__span-16-19><a id=__codelineno-16-19 name=__codelineno-16-19 href=#__codelineno-16-19></a>
</span><span id=__span-16-20><a id=__codelineno-16-20 name=__codelineno-16-20 href=#__codelineno-16-20></a><span class=w>  </span><span class=k>return</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>data</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=p>,</span><span class=w> </span><span class=nx>isLoading</span><span class=p>,</span><span class=w> </span><span class=nx>mutate</span><span class=w> </span><span class=p>};</span>
</span><span id=__span-16-21><a id=__codelineno-16-21 name=__codelineno-16-21 href=#__codelineno-16-21></a><span class=p>}</span>
</span></code></pre></div></p> <h3 id=usesessions>useSessions<a class=headerlink href=#usesessions title="Permanent link">&para;</a></h3> <p>Fetches workout sessions with optional filtering.</p> <div class="language-typescript highlight"><pre><span></span><code><span id=__span-17-1><a id=__codelineno-17-1 name=__codelineno-17-1 href=#__codelineno-17-1></a><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>useSessions</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@/lib/hooks/useSessions&#39;</span><span class=p>;</span>
</span><span id=__span-17-2><a id=__codelineno-17-2 name=__codelineno-17-2 href=#__codelineno-17-2></a>
</span><span id=__span-17-3><a id=__codelineno-17-3 name=__codelineno-17-3 href=#__codelineno-17-3></a><span class=kd>function</span><span class=w> </span><span class=nx>MyComponent</span><span class=p>()</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-17-4><a id=__codelineno-17-4 name=__codelineno-17-4 href=#__codelineno-17-4></a><span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=p>{</span><span class=w> </span>
</span><span id=__span-17-5><a id=__codelineno-17-5 name=__codelineno-17-5 href=#__codelineno-17-5></a><span class=w>    </span><span class=nx>data</span><span class=o>:</span><span class=w> </span><span class=kt>sessions</span><span class=p>,</span><span class=w>         </span><span class=c1>// WorkoutSession[]</span>
</span><span id=__span-17-6><a id=__codelineno-17-6 name=__codelineno-17-6 href=#__codelineno-17-6></a><span class=w>    </span><span class=nx>error</span><span class=p>,</span><span class=w>                  </span><span class=c1>// Error | undefined</span>
</span><span id=__span-17-7><a id=__codelineno-17-7 name=__codelineno-17-7 href=#__codelineno-17-7></a><span class=w>    </span><span class=nx>isLoading</span><span class=p>,</span><span class=w>             </span><span class=c1>// boolean</span>
</span><span id=__span-17-8><a id=__codelineno-17-8 name=__codelineno-17-8 href=#__codelineno-17-8></a><span class=w>    </span><span class=nx>mutate</span><span class=w>                 </span><span class=c1>// Function to refresh data</span>
</span><span id=__span-17-9><a id=__codelineno-17-9 name=__codelineno-17-9 href=#__codelineno-17-9></a><span class=w>  </span><span class=p>}</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useSessions</span><span class=p>({</span>
</span><span id=__span-17-10><a id=__codelineno-17-10 name=__codelineno-17-10 href=#__codelineno-17-10></a><span class=w>    </span><span class=nx>startDate</span><span class=o>:</span><span class=w> </span><span class=kt>new</span><span class=w> </span><span class=nb>Date</span><span class=p>(</span><span class=s1>&#39;2024-01-01&#39;</span><span class=p>),</span>
</span><span id=__span-17-11><a id=__codelineno-17-11 name=__codelineno-17-11 href=#__codelineno-17-11></a><span class=w>    </span><span class=nx>endDate</span><span class=o>:</span><span class=w> </span><span class=kt>new</span><span class=w> </span><span class=nb>Date</span><span class=p>(</span><span class=s1>&#39;2024-12-31&#39;</span><span class=p>),</span>
</span><span id=__span-17-12><a id=__codelineno-17-12 name=__codelineno-17-12 href=#__codelineno-17-12></a><span class=w>    </span><span class=nx>workoutTypeId</span><span class=o>:</span><span class=w> </span><span class=s1>&#39;bench-press-id&#39;</span><span class=p>,</span><span class=w> </span><span class=c1>// optional filter</span>
</span><span id=__span-17-13><a id=__codelineno-17-13 name=__codelineno-17-13 href=#__codelineno-17-13></a><span class=w>  </span><span class=p>});</span>
</span><span id=__span-17-14><a id=__codelineno-17-14 name=__codelineno-17-14 href=#__codelineno-17-14></a>
</span><span id=__span-17-15><a id=__codelineno-17-15 name=__codelineno-17-15 href=#__codelineno-17-15></a><span class=w>  </span><span class=c1>// Use sessions...</span>
</span><span id=__span-17-16><a id=__codelineno-17-16 name=__codelineno-17-16 href=#__codelineno-17-16></a><span class=p>}</span>
</span></code></pre></div> <p><strong>Parameters</strong>: <div class="language-typescript highlight"><pre><span></span><code><span id=__span-18-1><a id=__codelineno-18-1 name=__codelineno-18-1 href=#__codelineno-18-1></a><span class=kd>interface</span><span class=w> </span><span class=nx>UseSessionsParams</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-18-2><a id=__codelineno-18-2 name=__codelineno-18-2 href=#__codelineno-18-2></a><span class=w>  </span><span class=nx>startDate?</span><span class=o>:</span><span class=w> </span><span class=kt>Date</span><span class=p>;</span><span class=w>              </span><span class=c1>// Filter by start date</span>
</span><span id=__span-18-3><a id=__codelineno-18-3 name=__codelineno-18-3 href=#__codelineno-18-3></a><span class=w>  </span><span class=nx>endDate?</span><span class=o>:</span><span class=w> </span><span class=kt>Date</span><span class=p>;</span><span class=w>                </span><span class=c1>// Filter by end date</span>
</span><span id=__span-18-4><a id=__codelineno-18-4 name=__codelineno-18-4 href=#__codelineno-18-4></a><span class=w>  </span><span class=nx>workoutTypeId?</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>;</span><span class=w>        </span><span class=c1>// Filter by specific exercise</span>
</span><span id=__span-18-5><a id=__codelineno-18-5 name=__codelineno-18-5 href=#__codelineno-18-5></a><span class=w>  </span><span class=nx>limit?</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=p>;</span><span class=w>                </span><span class=c1>// Limit number of results</span>
</span><span id=__span-18-6><a id=__codelineno-18-6 name=__codelineno-18-6 href=#__codelineno-18-6></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Features</strong>: - Real-time updates - Date range filtering - Exercise filtering - Pagination support - Automatic caching</p> <h2 id=firebase-operations>Firebase Operations<a class=headerlink href=#firebase-operations title="Permanent link">&para;</a></h2> <h3 id=creating-data>Creating Data<a class=headerlink href=#creating-data title="Permanent link">&para;</a></h3> <p><strong>Create Workout Type</strong>: <div class="language-typescript highlight"><pre><span></span><code><span id=__span-19-1><a id=__codelineno-19-1 name=__codelineno-19-1 href=#__codelineno-19-1></a><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>addDoc</span><span class=p>,</span><span class=w> </span><span class=nx>collection</span><span class=p>,</span><span class=w> </span><span class=nx>serverTimestamp</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;firebase/firestore&#39;</span><span class=p>;</span>
</span><span id=__span-19-2><a id=__codelineno-19-2 name=__codelineno-19-2 href=#__codelineno-19-2></a><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>db</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;@/lib/firebase/config&#39;</span><span class=p>;</span>
</span><span id=__span-19-3><a id=__codelineno-19-3 name=__codelineno-19-3 href=#__codelineno-19-3></a>
</span><span id=__span-19-4><a id=__codelineno-19-4 name=__codelineno-19-4 href=#__codelineno-19-4></a><span class=k>async</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>createWorkoutType</span><span class=p>(</span><span class=nx>data</span><span class=o>:</span><span class=w> </span><span class=kt>WorkoutTypeInput</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-19-5><a id=__codelineno-19-5 name=__codelineno-19-5 href=#__codelineno-19-5></a><span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>user</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useAuth</span><span class=p>();</span>
</span><span id=__span-19-6><a id=__codelineno-19-6 name=__codelineno-19-6 href=#__codelineno-19-6></a>
</span><span id=__span-19-7><a id=__codelineno-19-7 name=__codelineno-19-7 href=#__codelineno-19-7></a><span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>docRef</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>addDoc</span><span class=p>(</span><span class=nx>collection</span><span class=p>(</span><span class=nx>db</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;workoutTypes&#39;</span><span class=p>),</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-19-8><a id=__codelineno-19-8 name=__codelineno-19-8 href=#__codelineno-19-8></a><span class=w>    </span><span class=p>...</span><span class=nx>data</span><span class=p>,</span>
</span><span id=__span-19-9><a id=__codelineno-19-9 name=__codelineno-19-9 href=#__codelineno-19-9></a><span class=w>    </span><span class=nx>userId</span><span class=o>:</span><span class=w> </span><span class=kt>user.uid</span><span class=p>,</span>
</span><span id=__span-19-10><a id=__codelineno-19-10 name=__codelineno-19-10 href=#__codelineno-19-10></a><span class=w>    </span><span class=nx>isDefault</span><span class=o>:</span><span class=w> </span><span class=kt>false</span><span class=p>,</span>
</span><span id=__span-19-11><a id=__codelineno-19-11 name=__codelineno-19-11 href=#__codelineno-19-11></a><span class=w>    </span><span class=nx>createdAt</span><span class=o>:</span><span class=w> </span><span class=kt>serverTimestamp</span><span class=p>(),</span>
</span><span id=__span-19-12><a id=__codelineno-19-12 name=__codelineno-19-12 href=#__codelineno-19-12></a><span class=w>    </span><span class=nx>updatedAt</span><span class=o>:</span><span class=w> </span><span class=kt>serverTimestamp</span><span class=p>(),</span>
</span><span id=__span-19-13><a id=__codelineno-19-13 name=__codelineno-19-13 href=#__codelineno-19-13></a><span class=w>  </span><span class=p>});</span>
</span><span id=__span-19-14><a id=__codelineno-19-14 name=__codelineno-19-14 href=#__codelineno-19-14></a>
</span><span id=__span-19-15><a id=__codelineno-19-15 name=__codelineno-19-15 href=#__codelineno-19-15></a><span class=w>  </span><span class=k>return</span><span class=w> </span><span class=nx>docRef</span><span class=p>.</span><span class=nx>id</span><span class=p>;</span>
</span><span id=__span-19-16><a id=__codelineno-19-16 name=__codelineno-19-16 href=#__codelineno-19-16></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Create Workout Session</strong>: <div class="language-typescript highlight"><pre><span></span><code><span id=__span-20-1><a id=__codelineno-20-1 name=__codelineno-20-1 href=#__codelineno-20-1></a><span class=k>async</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>createWorkoutSession</span><span class=p>(</span><span class=nx>data</span><span class=o>:</span><span class=w> </span><span class=kt>WorkoutSessionInput</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-20-2><a id=__codelineno-20-2 name=__codelineno-20-2 href=#__codelineno-20-2></a><span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>user</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useAuth</span><span class=p>();</span>
</span><span id=__span-20-3><a id=__codelineno-20-3 name=__codelineno-20-3 href=#__codelineno-20-3></a>
</span><span id=__span-20-4><a id=__codelineno-20-4 name=__codelineno-20-4 href=#__codelineno-20-4></a><span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>docRef</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>addDoc</span><span class=p>(</span><span class=nx>collection</span><span class=p>(</span><span class=nx>db</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;workoutSessions&#39;</span><span class=p>),</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-20-5><a id=__codelineno-20-5 name=__codelineno-20-5 href=#__codelineno-20-5></a><span class=w>    </span><span class=p>...</span><span class=nx>data</span><span class=p>,</span>
</span><span id=__span-20-6><a id=__codelineno-20-6 name=__codelineno-20-6 href=#__codelineno-20-6></a><span class=w>    </span><span class=nx>userId</span><span class=o>:</span><span class=w> </span><span class=kt>user.uid</span><span class=p>,</span>
</span><span id=__span-20-7><a id=__codelineno-20-7 name=__codelineno-20-7 href=#__codelineno-20-7></a><span class=w>    </span><span class=nx>date</span><span class=o>:</span><span class=w> </span><span class=kt>Timestamp.fromDate</span><span class=p>(</span><span class=nx>data</span><span class=p>.</span><span class=nx>date</span><span class=p>),</span>
</span><span id=__span-20-8><a id=__codelineno-20-8 name=__codelineno-20-8 href=#__codelineno-20-8></a><span class=w>    </span><span class=nx>createdAt</span><span class=o>:</span><span class=w> </span><span class=kt>serverTimestamp</span><span class=p>(),</span>
</span><span id=__span-20-9><a id=__codelineno-20-9 name=__codelineno-20-9 href=#__codelineno-20-9></a><span class=w>    </span><span class=nx>updatedAt</span><span class=o>:</span><span class=w> </span><span class=kt>serverTimestamp</span><span class=p>(),</span>
</span><span id=__span-20-10><a id=__codelineno-20-10 name=__codelineno-20-10 href=#__codelineno-20-10></a><span class=w>  </span><span class=p>});</span>
</span><span id=__span-20-11><a id=__codelineno-20-11 name=__codelineno-20-11 href=#__codelineno-20-11></a>
</span><span id=__span-20-12><a id=__codelineno-20-12 name=__codelineno-20-12 href=#__codelineno-20-12></a><span class=w>  </span><span class=k>return</span><span class=w> </span><span class=nx>docRef</span><span class=p>.</span><span class=nx>id</span><span class=p>;</span>
</span><span id=__span-20-13><a id=__codelineno-20-13 name=__codelineno-20-13 href=#__codelineno-20-13></a><span class=p>}</span>
</span></code></pre></div></p> <h3 id=reading-data>Reading Data<a class=headerlink href=#reading-data title="Permanent link">&para;</a></h3> <p><strong>Get Single Document</strong>: <div class="language-typescript highlight"><pre><span></span><code><span id=__span-21-1><a id=__codelineno-21-1 name=__codelineno-21-1 href=#__codelineno-21-1></a><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>doc</span><span class=p>,</span><span class=w> </span><span class=nx>getDoc</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;firebase/firestore&#39;</span><span class=p>;</span>
</span><span id=__span-21-2><a id=__codelineno-21-2 name=__codelineno-21-2 href=#__codelineno-21-2></a>
</span><span id=__span-21-3><a id=__codelineno-21-3 name=__codelineno-21-3 href=#__codelineno-21-3></a><span class=k>async</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>getWorkoutSession</span><span class=p>(</span><span class=nx>sessionId</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-21-4><a id=__codelineno-21-4 name=__codelineno-21-4 href=#__codelineno-21-4></a><span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>docRef</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>doc</span><span class=p>(</span><span class=nx>db</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;workoutSessions&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>sessionId</span><span class=p>);</span>
</span><span id=__span-21-5><a id=__codelineno-21-5 name=__codelineno-21-5 href=#__codelineno-21-5></a><span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>docSnap</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>getDoc</span><span class=p>(</span><span class=nx>docRef</span><span class=p>);</span>
</span><span id=__span-21-6><a id=__codelineno-21-6 name=__codelineno-21-6 href=#__codelineno-21-6></a>
</span><span id=__span-21-7><a id=__codelineno-21-7 name=__codelineno-21-7 href=#__codelineno-21-7></a><span class=w>  </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=o>!</span><span class=nx>docSnap</span><span class=p>.</span><span class=nx>exists</span><span class=p>())</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-21-8><a id=__codelineno-21-8 name=__codelineno-21-8 href=#__codelineno-21-8></a><span class=w>    </span><span class=k>throw</span><span class=w> </span><span class=ow>new</span><span class=w> </span><span class=ne>Error</span><span class=p>(</span><span class=s1>&#39;Session not found&#39;</span><span class=p>);</span>
</span><span id=__span-21-9><a id=__codelineno-21-9 name=__codelineno-21-9 href=#__codelineno-21-9></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-21-10><a id=__codelineno-21-10 name=__codelineno-21-10 href=#__codelineno-21-10></a>
</span><span id=__span-21-11><a id=__codelineno-21-11 name=__codelineno-21-11 href=#__codelineno-21-11></a><span class=w>  </span><span class=k>return</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=kt>docSnap.id</span><span class=p>,</span><span class=w> </span><span class=p>...</span><span class=nx>docSnap</span><span class=p>.</span><span class=nx>data</span><span class=p>()</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>as</span><span class=w> </span><span class=nx>WorkoutSession</span><span class=p>;</span>
</span><span id=__span-21-12><a id=__codelineno-21-12 name=__codelineno-21-12 href=#__codelineno-21-12></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Query Collection</strong>: <div class="language-typescript highlight"><pre><span></span><code><span id=__span-22-1><a id=__codelineno-22-1 name=__codelineno-22-1 href=#__codelineno-22-1></a><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>collection</span><span class=p>,</span><span class=w> </span><span class=nx>query</span><span class=p>,</span><span class=w> </span><span class=nx>where</span><span class=p>,</span><span class=w> </span><span class=nx>orderBy</span><span class=p>,</span><span class=w> </span><span class=nx>getDocs</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;firebase/firestore&#39;</span><span class=p>;</span>
</span><span id=__span-22-2><a id=__codelineno-22-2 name=__codelineno-22-2 href=#__codelineno-22-2></a>
</span><span id=__span-22-3><a id=__codelineno-22-3 name=__codelineno-22-3 href=#__codelineno-22-3></a><span class=k>async</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>getUserSessions</span><span class=p>(</span><span class=nx>userId</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-22-4><a id=__codelineno-22-4 name=__codelineno-22-4 href=#__codelineno-22-4></a><span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>q</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>query</span><span class=p>(</span>
</span><span id=__span-22-5><a id=__codelineno-22-5 name=__codelineno-22-5 href=#__codelineno-22-5></a><span class=w>    </span><span class=nx>collection</span><span class=p>(</span><span class=nx>db</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;workoutSessions&#39;</span><span class=p>),</span>
</span><span id=__span-22-6><a id=__codelineno-22-6 name=__codelineno-22-6 href=#__codelineno-22-6></a><span class=w>    </span><span class=nx>where</span><span class=p>(</span><span class=s1>&#39;userId&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;==&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>userId</span><span class=p>),</span>
</span><span id=__span-22-7><a id=__codelineno-22-7 name=__codelineno-22-7 href=#__codelineno-22-7></a><span class=w>    </span><span class=nx>orderBy</span><span class=p>(</span><span class=s1>&#39;date&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;desc&#39;</span><span class=p>)</span>
</span><span id=__span-22-8><a id=__codelineno-22-8 name=__codelineno-22-8 href=#__codelineno-22-8></a><span class=w>  </span><span class=p>);</span>
</span><span id=__span-22-9><a id=__codelineno-22-9 name=__codelineno-22-9 href=#__codelineno-22-9></a>
</span><span id=__span-22-10><a id=__codelineno-22-10 name=__codelineno-22-10 href=#__codelineno-22-10></a><span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>snapshot</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>getDocs</span><span class=p>(</span><span class=nx>q</span><span class=p>);</span>
</span><span id=__span-22-11><a id=__codelineno-22-11 name=__codelineno-22-11 href=#__codelineno-22-11></a><span class=w>  </span><span class=k>return</span><span class=w> </span><span class=nx>snapshot</span><span class=p>.</span><span class=nx>docs</span><span class=p>.</span><span class=nx>map</span><span class=p>(</span><span class=nx>doc</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>({</span>
</span><span id=__span-22-12><a id=__codelineno-22-12 name=__codelineno-22-12 href=#__codelineno-22-12></a><span class=w>    </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=kt>doc.id</span><span class=p>,</span>
</span><span id=__span-22-13><a id=__codelineno-22-13 name=__codelineno-22-13 href=#__codelineno-22-13></a><span class=w>    </span><span class=p>...</span><span class=nx>doc</span><span class=p>.</span><span class=nx>data</span><span class=p>()</span>
</span><span id=__span-22-14><a id=__codelineno-22-14 name=__codelineno-22-14 href=#__codelineno-22-14></a><span class=w>  </span><span class=p>}))</span><span class=w> </span><span class=kr>as</span><span class=w> </span><span class=nx>WorkoutSession</span><span class=p>[];</span>
</span><span id=__span-22-15><a id=__codelineno-22-15 name=__codelineno-22-15 href=#__codelineno-22-15></a><span class=p>}</span>
</span></code></pre></div></p> <h3 id=updating-data>Updating Data<a class=headerlink href=#updating-data title="Permanent link">&para;</a></h3> <p><strong>Update Workout Type</strong>: <div class="language-typescript highlight"><pre><span></span><code><span id=__span-23-1><a id=__codelineno-23-1 name=__codelineno-23-1 href=#__codelineno-23-1></a><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>doc</span><span class=p>,</span><span class=w> </span><span class=nx>updateDoc</span><span class=p>,</span><span class=w> </span><span class=nx>serverTimestamp</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;firebase/firestore&#39;</span><span class=p>;</span>
</span><span id=__span-23-2><a id=__codelineno-23-2 name=__codelineno-23-2 href=#__codelineno-23-2></a>
</span><span id=__span-23-3><a id=__codelineno-23-3 name=__codelineno-23-3 href=#__codelineno-23-3></a><span class=k>async</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>updateWorkoutType</span><span class=p>(</span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>,</span><span class=w> </span><span class=nx>updates</span><span class=o>:</span><span class=w> </span><span class=kt>Partial</span><span class=o>&lt;</span><span class=nx>WorkoutTypeInput</span><span class=o>&gt;</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-23-4><a id=__codelineno-23-4 name=__codelineno-23-4 href=#__codelineno-23-4></a><span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>docRef</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>doc</span><span class=p>(</span><span class=nx>db</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;workoutTypes&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>id</span><span class=p>);</span>
</span><span id=__span-23-5><a id=__codelineno-23-5 name=__codelineno-23-5 href=#__codelineno-23-5></a>
</span><span id=__span-23-6><a id=__codelineno-23-6 name=__codelineno-23-6 href=#__codelineno-23-6></a><span class=w>  </span><span class=k>await</span><span class=w> </span><span class=nx>updateDoc</span><span class=p>(</span><span class=nx>docRef</span><span class=p>,</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-23-7><a id=__codelineno-23-7 name=__codelineno-23-7 href=#__codelineno-23-7></a><span class=w>    </span><span class=p>...</span><span class=nx>updates</span><span class=p>,</span>
</span><span id=__span-23-8><a id=__codelineno-23-8 name=__codelineno-23-8 href=#__codelineno-23-8></a><span class=w>    </span><span class=nx>updatedAt</span><span class=o>:</span><span class=w> </span><span class=kt>serverTimestamp</span><span class=p>(),</span>
</span><span id=__span-23-9><a id=__codelineno-23-9 name=__codelineno-23-9 href=#__codelineno-23-9></a><span class=w>  </span><span class=p>});</span>
</span><span id=__span-23-10><a id=__codelineno-23-10 name=__codelineno-23-10 href=#__codelineno-23-10></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Update Workout Session</strong>: <div class="language-typescript highlight"><pre><span></span><code><span id=__span-24-1><a id=__codelineno-24-1 name=__codelineno-24-1 href=#__codelineno-24-1></a><span class=k>async</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>updateWorkoutSession</span><span class=p>(</span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>,</span><span class=w> </span><span class=nx>updates</span><span class=o>:</span><span class=w> </span><span class=kt>Partial</span><span class=o>&lt;</span><span class=nx>WorkoutSessionInput</span><span class=o>&gt;</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-24-2><a id=__codelineno-24-2 name=__codelineno-24-2 href=#__codelineno-24-2></a><span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>docRef</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>doc</span><span class=p>(</span><span class=nx>db</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;workoutSessions&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>id</span><span class=p>);</span>
</span><span id=__span-24-3><a id=__codelineno-24-3 name=__codelineno-24-3 href=#__codelineno-24-3></a>
</span><span id=__span-24-4><a id=__codelineno-24-4 name=__codelineno-24-4 href=#__codelineno-24-4></a><span class=w>  </span><span class=k>await</span><span class=w> </span><span class=nx>updateDoc</span><span class=p>(</span><span class=nx>docRef</span><span class=p>,</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-24-5><a id=__codelineno-24-5 name=__codelineno-24-5 href=#__codelineno-24-5></a><span class=w>    </span><span class=p>...</span><span class=nx>updates</span><span class=p>,</span>
</span><span id=__span-24-6><a id=__codelineno-24-6 name=__codelineno-24-6 href=#__codelineno-24-6></a><span class=w>    </span><span class=nx>updatedAt</span><span class=o>:</span><span class=w> </span><span class=kt>serverTimestamp</span><span class=p>(),</span>
</span><span id=__span-24-7><a id=__codelineno-24-7 name=__codelineno-24-7 href=#__codelineno-24-7></a><span class=w>  </span><span class=p>});</span>
</span><span id=__span-24-8><a id=__codelineno-24-8 name=__codelineno-24-8 href=#__codelineno-24-8></a><span class=p>}</span>
</span></code></pre></div></p> <h3 id=deleting-data>Deleting Data<a class=headerlink href=#deleting-data title="Permanent link">&para;</a></h3> <p><strong>Delete Workout Type</strong>: <div class="language-typescript highlight"><pre><span></span><code><span id=__span-25-1><a id=__codelineno-25-1 name=__codelineno-25-1 href=#__codelineno-25-1></a><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>doc</span><span class=p>,</span><span class=w> </span><span class=nx>deleteDoc</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;firebase/firestore&#39;</span><span class=p>;</span>
</span><span id=__span-25-2><a id=__codelineno-25-2 name=__codelineno-25-2 href=#__codelineno-25-2></a>
</span><span id=__span-25-3><a id=__codelineno-25-3 name=__codelineno-25-3 href=#__codelineno-25-3></a><span class=k>async</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>deleteWorkoutType</span><span class=p>(</span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-25-4><a id=__codelineno-25-4 name=__codelineno-25-4 href=#__codelineno-25-4></a><span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>docRef</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>doc</span><span class=p>(</span><span class=nx>db</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;workoutTypes&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>id</span><span class=p>);</span>
</span><span id=__span-25-5><a id=__codelineno-25-5 name=__codelineno-25-5 href=#__codelineno-25-5></a><span class=w>  </span><span class=k>await</span><span class=w> </span><span class=nx>deleteDoc</span><span class=p>(</span><span class=nx>docRef</span><span class=p>);</span>
</span><span id=__span-25-6><a id=__codelineno-25-6 name=__codelineno-25-6 href=#__codelineno-25-6></a><span class=p>}</span>
</span></code></pre></div></p> <p><strong>Delete Workout Session</strong>: <div class="language-typescript highlight"><pre><span></span><code><span id=__span-26-1><a id=__codelineno-26-1 name=__codelineno-26-1 href=#__codelineno-26-1></a><span class=k>async</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>deleteWorkoutSession</span><span class=p>(</span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-26-2><a id=__codelineno-26-2 name=__codelineno-26-2 href=#__codelineno-26-2></a><span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>docRef</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>doc</span><span class=p>(</span><span class=nx>db</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;workoutSessions&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>id</span><span class=p>);</span>
</span><span id=__span-26-3><a id=__codelineno-26-3 name=__codelineno-26-3 href=#__codelineno-26-3></a><span class=w>  </span><span class=k>await</span><span class=w> </span><span class=nx>deleteDoc</span><span class=p>(</span><span class=nx>docRef</span><span class=p>);</span>
</span><span id=__span-26-4><a id=__codelineno-26-4 name=__codelineno-26-4 href=#__codelineno-26-4></a><span class=p>}</span>
</span></code></pre></div></p> <h3 id=real-time-listeners>Real-Time Listeners<a class=headerlink href=#real-time-listeners title="Permanent link">&para;</a></h3> <p><strong>Listen to Workout Types</strong>: <div class="language-typescript highlight"><pre><span></span><code><span id=__span-27-1><a id=__codelineno-27-1 name=__codelineno-27-1 href=#__codelineno-27-1></a><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>collection</span><span class=p>,</span><span class=w> </span><span class=nx>query</span><span class=p>,</span><span class=w> </span><span class=nx>where</span><span class=p>,</span><span class=w> </span><span class=nx>onSnapshot</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;firebase/firestore&#39;</span><span class=p>;</span>
</span><span id=__span-27-2><a id=__codelineno-27-2 name=__codelineno-27-2 href=#__codelineno-27-2></a>
</span><span id=__span-27-3><a id=__codelineno-27-3 name=__codelineno-27-3 href=#__codelineno-27-3></a><span class=kd>function</span><span class=w> </span><span class=nx>subscribeToWorkoutTypes</span><span class=p>(</span><span class=nx>userId</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>,</span><span class=w> </span><span class=nx>callback</span><span class=o>:</span><span class=w> </span><span class=p>(</span><span class=nx>types</span><span class=o>:</span><span class=w> </span><span class=kt>WorkoutType</span><span class=p>[])</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=ow>void</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-27-4><a id=__codelineno-27-4 name=__codelineno-27-4 href=#__codelineno-27-4></a><span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>q</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>query</span><span class=p>(</span>
</span><span id=__span-27-5><a id=__codelineno-27-5 name=__codelineno-27-5 href=#__codelineno-27-5></a><span class=w>    </span><span class=nx>collection</span><span class=p>(</span><span class=nx>db</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;workoutTypes&#39;</span><span class=p>),</span>
</span><span id=__span-27-6><a id=__codelineno-27-6 name=__codelineno-27-6 href=#__codelineno-27-6></a><span class=w>    </span><span class=nx>where</span><span class=p>(</span><span class=s1>&#39;userId&#39;</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;==&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>userId</span><span class=p>)</span>
</span><span id=__span-27-7><a id=__codelineno-27-7 name=__codelineno-27-7 href=#__codelineno-27-7></a><span class=w>  </span><span class=p>);</span>
</span><span id=__span-27-8><a id=__codelineno-27-8 name=__codelineno-27-8 href=#__codelineno-27-8></a>
</span><span id=__span-27-9><a id=__codelineno-27-9 name=__codelineno-27-9 href=#__codelineno-27-9></a><span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>unsubscribe</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>onSnapshot</span><span class=p>(</span><span class=nx>q</span><span class=p>,</span><span class=w> </span><span class=p>(</span><span class=nx>snapshot</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-27-10><a id=__codelineno-27-10 name=__codelineno-27-10 href=#__codelineno-27-10></a><span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>types</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>snapshot</span><span class=p>.</span><span class=nx>docs</span><span class=p>.</span><span class=nx>map</span><span class=p>(</span><span class=nx>doc</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>({</span>
</span><span id=__span-27-11><a id=__codelineno-27-11 name=__codelineno-27-11 href=#__codelineno-27-11></a><span class=w>      </span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=kt>doc.id</span><span class=p>,</span>
</span><span id=__span-27-12><a id=__codelineno-27-12 name=__codelineno-27-12 href=#__codelineno-27-12></a><span class=w>      </span><span class=p>...</span><span class=nx>doc</span><span class=p>.</span><span class=nx>data</span><span class=p>()</span>
</span><span id=__span-27-13><a id=__codelineno-27-13 name=__codelineno-27-13 href=#__codelineno-27-13></a><span class=w>    </span><span class=p>}))</span><span class=w> </span><span class=kr>as</span><span class=w> </span><span class=nx>WorkoutType</span><span class=p>[];</span>
</span><span id=__span-27-14><a id=__codelineno-27-14 name=__codelineno-27-14 href=#__codelineno-27-14></a>
</span><span id=__span-27-15><a id=__codelineno-27-15 name=__codelineno-27-15 href=#__codelineno-27-15></a><span class=w>    </span><span class=nx>callback</span><span class=p>(</span><span class=nx>types</span><span class=p>);</span>
</span><span id=__span-27-16><a id=__codelineno-27-16 name=__codelineno-27-16 href=#__codelineno-27-16></a><span class=w>  </span><span class=p>});</span>
</span><span id=__span-27-17><a id=__codelineno-27-17 name=__codelineno-27-17 href=#__codelineno-27-17></a>
</span><span id=__span-27-18><a id=__codelineno-27-18 name=__codelineno-27-18 href=#__codelineno-27-18></a><span class=w>  </span><span class=c1>// Return unsubscribe function to clean up</span>
</span><span id=__span-27-19><a id=__codelineno-27-19 name=__codelineno-27-19 href=#__codelineno-27-19></a><span class=w>  </span><span class=k>return</span><span class=w> </span><span class=nx>unsubscribe</span><span class=p>;</span>
</span><span id=__span-27-20><a id=__codelineno-27-20 name=__codelineno-27-20 href=#__codelineno-27-20></a><span class=p>}</span>
</span></code></pre></div></p> <h2 id=validation>Validation<a class=headerlink href=#validation title="Permanent link">&para;</a></h2> <h3 id=zod-schemas>Zod Schemas<a class=headerlink href=#zod-schemas title="Permanent link">&para;</a></h3> <p>All form inputs are validated with Zod schemas before submission.</p> <p><strong>Workout Type Schema</strong>: <div class="language-typescript highlight"><pre><span></span><code><span id=__span-28-1><a id=__codelineno-28-1 name=__codelineno-28-1 href=#__codelineno-28-1></a><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>z</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;zod&#39;</span><span class=p>;</span>
</span><span id=__span-28-2><a id=__codelineno-28-2 name=__codelineno-28-2 href=#__codelineno-28-2></a>
</span><span id=__span-28-3><a id=__codelineno-28-3 name=__codelineno-28-3 href=#__codelineno-28-3></a><span class=k>export</span><span class=w> </span><span class=kd>const</span><span class=w> </span><span class=nx>workoutTypeSchema</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>z</span><span class=p>.</span><span class=nx>object</span><span class=p>({</span>
</span><span id=__span-28-4><a id=__codelineno-28-4 name=__codelineno-28-4 href=#__codelineno-28-4></a><span class=w>  </span><span class=nx>name</span><span class=o>:</span><span class=w> </span><span class=kt>z.string</span><span class=p>()</span>
</span><span id=__span-28-5><a id=__codelineno-28-5 name=__codelineno-28-5 href=#__codelineno-28-5></a><span class=w>    </span><span class=p>.</span><span class=nx>min</span><span class=p>(</span><span class=mf>1</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;Name is required&#39;</span><span class=p>)</span>
</span><span id=__span-28-6><a id=__codelineno-28-6 name=__codelineno-28-6 href=#__codelineno-28-6></a><span class=w>    </span><span class=p>.</span><span class=nx>max</span><span class=p>(</span><span class=mf>100</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;Name must be less than 100 characters&#39;</span><span class=p>),</span>
</span><span id=__span-28-7><a id=__codelineno-28-7 name=__codelineno-28-7 href=#__codelineno-28-7></a><span class=w>  </span><span class=nx>category</span><span class=o>:</span><span class=w> </span><span class=kt>z.nativeEnum</span><span class=p>(</span><span class=nx>WorkoutCategory</span><span class=p>),</span>
</span><span id=__span-28-8><a id=__codelineno-28-8 name=__codelineno-28-8 href=#__codelineno-28-8></a><span class=w>  </span><span class=nx>equipment</span><span class=o>:</span><span class=w> </span><span class=kt>z.nativeEnum</span><span class=p>(</span><span class=nx>EquipmentType</span><span class=p>),</span>
</span><span id=__span-28-9><a id=__codelineno-28-9 name=__codelineno-28-9 href=#__codelineno-28-9></a><span class=w>  </span><span class=nx>muscleGroups</span><span class=o>:</span><span class=w> </span><span class=kt>z.array</span><span class=p>(</span><span class=nx>z</span><span class=p>.</span><span class=nx>nativeEnum</span><span class=p>(</span><span class=nx>MuscleGroup</span><span class=p>))</span>
</span><span id=__span-28-10><a id=__codelineno-28-10 name=__codelineno-28-10 href=#__codelineno-28-10></a><span class=w>    </span><span class=p>.</span><span class=nx>min</span><span class=p>(</span><span class=mf>1</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;Select at least one muscle group&#39;</span><span class=p>),</span>
</span><span id=__span-28-11><a id=__codelineno-28-11 name=__codelineno-28-11 href=#__codelineno-28-11></a><span class=w>  </span><span class=nx>activityTags</span><span class=o>:</span><span class=w> </span><span class=kt>z.array</span><span class=p>(</span><span class=nx>z</span><span class=p>.</span><span class=nx>nativeEnum</span><span class=p>(</span><span class=nx>ActivityTag</span><span class=p>)),</span>
</span><span id=__span-28-12><a id=__codelineno-28-12 name=__codelineno-28-12 href=#__codelineno-28-12></a><span class=p>});</span>
</span><span id=__span-28-13><a id=__codelineno-28-13 name=__codelineno-28-13 href=#__codelineno-28-13></a>
</span><span id=__span-28-14><a id=__codelineno-28-14 name=__codelineno-28-14 href=#__codelineno-28-14></a><span class=k>export</span><span class=w> </span><span class=kr>type</span><span class=w> </span><span class=nx>WorkoutTypeFormData</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>z</span><span class=p>.</span><span class=nx>infer</span><span class=o>&lt;</span><span class=ow>typeof</span><span class=w> </span><span class=nx>workoutTypeSchema</span><span class=o>&gt;</span><span class=p>;</span>
</span></code></pre></div></p> <p><strong>Workout Session Schema</strong>: <div class="language-typescript highlight"><pre><span></span><code><span id=__span-29-1><a id=__codelineno-29-1 name=__codelineno-29-1 href=#__codelineno-29-1></a><span class=k>export</span><span class=w> </span><span class=kd>const</span><span class=w> </span><span class=nx>setEntrySchema</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>z</span><span class=p>.</span><span class=nx>object</span><span class=p>({</span>
</span><span id=__span-29-2><a id=__codelineno-29-2 name=__codelineno-29-2 href=#__codelineno-29-2></a><span class=w>  </span><span class=nx>reps</span><span class=o>:</span><span class=w> </span><span class=kt>z.number</span><span class=p>().</span><span class=kr>int</span><span class=p>().</span><span class=nx>min</span><span class=p>(</span><span class=mf>1</span><span class=p>).</span><span class=nx>optional</span><span class=p>(),</span>
</span><span id=__span-29-3><a id=__codelineno-29-3 name=__codelineno-29-3 href=#__codelineno-29-3></a><span class=w>  </span><span class=nx>weight</span><span class=o>:</span><span class=w> </span><span class=kt>z.number</span><span class=p>().</span><span class=nx>min</span><span class=p>(</span><span class=mf>0</span><span class=p>).</span><span class=nx>optional</span><span class=p>(),</span>
</span><span id=__span-29-4><a id=__codelineno-29-4 name=__codelineno-29-4 href=#__codelineno-29-4></a><span class=w>  </span><span class=nx>rpe</span><span class=o>:</span><span class=w> </span><span class=kt>z.number</span><span class=p>().</span><span class=kr>int</span><span class=p>().</span><span class=nx>min</span><span class=p>(</span><span class=mf>1</span><span class=p>).</span><span class=nx>max</span><span class=p>(</span><span class=mf>10</span><span class=p>).</span><span class=nx>optional</span><span class=p>(),</span>
</span><span id=__span-29-5><a id=__codelineno-29-5 name=__codelineno-29-5 href=#__codelineno-29-5></a><span class=w>  </span><span class=nx>distance</span><span class=o>:</span><span class=w> </span><span class=kt>z.number</span><span class=p>().</span><span class=nx>min</span><span class=p>(</span><span class=mf>0</span><span class=p>).</span><span class=nx>optional</span><span class=p>(),</span>
</span><span id=__span-29-6><a id=__codelineno-29-6 name=__codelineno-29-6 href=#__codelineno-29-6></a><span class=w>  </span><span class=nx>time</span><span class=o>:</span><span class=w> </span><span class=kt>z.number</span><span class=p>().</span><span class=kr>int</span><span class=p>().</span><span class=nx>min</span><span class=p>(</span><span class=mf>0</span><span class=p>).</span><span class=nx>optional</span><span class=p>(),</span>
</span><span id=__span-29-7><a id=__codelineno-29-7 name=__codelineno-29-7 href=#__codelineno-29-7></a><span class=p>});</span>
</span><span id=__span-29-8><a id=__codelineno-29-8 name=__codelineno-29-8 href=#__codelineno-29-8></a>
</span><span id=__span-29-9><a id=__codelineno-29-9 name=__codelineno-29-9 href=#__codelineno-29-9></a><span class=k>export</span><span class=w> </span><span class=kd>const</span><span class=w> </span><span class=nx>exerciseEntrySchema</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>z</span><span class=p>.</span><span class=nx>object</span><span class=p>({</span>
</span><span id=__span-29-10><a id=__codelineno-29-10 name=__codelineno-29-10 href=#__codelineno-29-10></a><span class=w>  </span><span class=nx>workoutTypeId</span><span class=o>:</span><span class=w> </span><span class=kt>z.string</span><span class=p>().</span><span class=nx>min</span><span class=p>(</span><span class=mf>1</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;Exercise is required&#39;</span><span class=p>),</span>
</span><span id=__span-29-11><a id=__codelineno-29-11 name=__codelineno-29-11 href=#__codelineno-29-11></a><span class=w>  </span><span class=nx>sets</span><span class=o>:</span><span class=w> </span><span class=kt>z.array</span><span class=p>(</span><span class=nx>setEntrySchema</span><span class=p>).</span><span class=nx>min</span><span class=p>(</span><span class=mf>1</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;Add at least one set&#39;</span><span class=p>),</span>
</span><span id=__span-29-12><a id=__codelineno-29-12 name=__codelineno-29-12 href=#__codelineno-29-12></a><span class=w>  </span><span class=nx>notes</span><span class=o>:</span><span class=w> </span><span class=kt>z.string</span><span class=p>().</span><span class=nx>optional</span><span class=p>(),</span>
</span><span id=__span-29-13><a id=__codelineno-29-13 name=__codelineno-29-13 href=#__codelineno-29-13></a><span class=p>});</span>
</span><span id=__span-29-14><a id=__codelineno-29-14 name=__codelineno-29-14 href=#__codelineno-29-14></a>
</span><span id=__span-29-15><a id=__codelineno-29-15 name=__codelineno-29-15 href=#__codelineno-29-15></a><span class=k>export</span><span class=w> </span><span class=kd>const</span><span class=w> </span><span class=nx>workoutSessionSchema</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>z</span><span class=p>.</span><span class=nx>object</span><span class=p>({</span>
</span><span id=__span-29-16><a id=__codelineno-29-16 name=__codelineno-29-16 href=#__codelineno-29-16></a><span class=w>  </span><span class=nx>date</span><span class=o>:</span><span class=w> </span><span class=kt>z.date</span><span class=p>(),</span>
</span><span id=__span-29-17><a id=__codelineno-29-17 name=__codelineno-29-17 href=#__codelineno-29-17></a><span class=w>  </span><span class=nx>duration</span><span class=o>:</span><span class=w> </span><span class=kt>z.number</span><span class=p>().</span><span class=kr>int</span><span class=p>().</span><span class=nx>min</span><span class=p>(</span><span class=mf>1</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;Duration must be at least 1 minute&#39;</span><span class=p>),</span>
</span><span id=__span-29-18><a id=__codelineno-29-18 name=__codelineno-29-18 href=#__codelineno-29-18></a><span class=w>  </span><span class=nx>exercises</span><span class=o>:</span><span class=w> </span><span class=kt>z.array</span><span class=p>(</span><span class=nx>exerciseEntrySchema</span><span class=p>).</span><span class=nx>min</span><span class=p>(</span><span class=mf>1</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;Add at least one exercise&#39;</span><span class=p>),</span>
</span><span id=__span-29-19><a id=__codelineno-29-19 name=__codelineno-29-19 href=#__codelineno-29-19></a><span class=w>  </span><span class=nx>notes</span><span class=o>:</span><span class=w> </span><span class=kt>z.string</span><span class=p>().</span><span class=nx>optional</span><span class=p>(),</span>
</span><span id=__span-29-20><a id=__codelineno-29-20 name=__codelineno-29-20 href=#__codelineno-29-20></a><span class=p>});</span>
</span><span id=__span-29-21><a id=__codelineno-29-21 name=__codelineno-29-21 href=#__codelineno-29-21></a>
</span><span id=__span-29-22><a id=__codelineno-29-22 name=__codelineno-29-22 href=#__codelineno-29-22></a><span class=k>export</span><span class=w> </span><span class=kr>type</span><span class=w> </span><span class=nx>WorkoutSessionFormData</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>z</span><span class=p>.</span><span class=nx>infer</span><span class=o>&lt;</span><span class=ow>typeof</span><span class=w> </span><span class=nx>workoutSessionSchema</span><span class=o>&gt;</span><span class=p>;</span>
</span></code></pre></div></p> <h2 id=error-handling>Error Handling<a class=headerlink href=#error-handling title="Permanent link">&para;</a></h2> <h3 id=firebase-errors>Firebase Errors<a class=headerlink href=#firebase-errors title="Permanent link">&para;</a></h3> <p>Common Firebase errors and how to handle them:</p> <div class="language-typescript highlight"><pre><span></span><code><span id=__span-30-1><a id=__codelineno-30-1 name=__codelineno-30-1 href=#__codelineno-30-1></a><span class=k>try</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-30-2><a id=__codelineno-30-2 name=__codelineno-30-2 href=#__codelineno-30-2></a><span class=w>  </span><span class=k>await</span><span class=w> </span><span class=nx>createWorkoutSession</span><span class=p>(</span><span class=nx>data</span><span class=p>);</span>
</span><span id=__span-30-3><a id=__codelineno-30-3 name=__codelineno-30-3 href=#__codelineno-30-3></a><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-30-4><a id=__codelineno-30-4 name=__codelineno-30-4 href=#__codelineno-30-4></a><span class=w>  </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>error</span><span class=p>.</span><span class=nx>code</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;permission-denied&#39;</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-30-5><a id=__codelineno-30-5 name=__codelineno-30-5 href=#__codelineno-30-5></a><span class=w>    </span><span class=c1>// User doesn&#39;t have permission</span>
</span><span id=__span-30-6><a id=__codelineno-30-6 name=__codelineno-30-6 href=#__codelineno-30-6></a><span class=w>    </span><span class=nx>toast</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;You do not have permission to perform this action&#39;</span><span class=p>);</span>
</span><span id=__span-30-7><a id=__codelineno-30-7 name=__codelineno-30-7 href=#__codelineno-30-7></a><span class=w>  </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>error</span><span class=p>.</span><span class=nx>code</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;not-found&#39;</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-30-8><a id=__codelineno-30-8 name=__codelineno-30-8 href=#__codelineno-30-8></a><span class=w>    </span><span class=c1>// Document doesn&#39;t exist</span>
</span><span id=__span-30-9><a id=__codelineno-30-9 name=__codelineno-30-9 href=#__codelineno-30-9></a><span class=w>    </span><span class=nx>toast</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;Workout session not found&#39;</span><span class=p>);</span>
</span><span id=__span-30-10><a id=__codelineno-30-10 name=__codelineno-30-10 href=#__codelineno-30-10></a><span class=w>  </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>error</span><span class=p>.</span><span class=nx>code</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=s1>&#39;unauthenticated&#39;</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-30-11><a id=__codelineno-30-11 name=__codelineno-30-11 href=#__codelineno-30-11></a><span class=w>    </span><span class=c1>// User is not authenticated</span>
</span><span id=__span-30-12><a id=__codelineno-30-12 name=__codelineno-30-12 href=#__codelineno-30-12></a><span class=w>    </span><span class=nx>router</span><span class=p>.</span><span class=nx>push</span><span class=p>(</span><span class=s1>&#39;/login&#39;</span><span class=p>);</span>
</span><span id=__span-30-13><a id=__codelineno-30-13 name=__codelineno-30-13 href=#__codelineno-30-13></a><span class=w>  </span><span class=p>}</span><span class=w> </span><span class=k>else</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-30-14><a id=__codelineno-30-14 name=__codelineno-30-14 href=#__codelineno-30-14></a><span class=w>    </span><span class=c1>// Generic error</span>
</span><span id=__span-30-15><a id=__codelineno-30-15 name=__codelineno-30-15 href=#__codelineno-30-15></a><span class=w>    </span><span class=nx>toast</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=s1>&#39;An error occurred. Please try again.&#39;</span><span class=p>);</span>
</span><span id=__span-30-16><a id=__codelineno-30-16 name=__codelineno-30-16 href=#__codelineno-30-16></a><span class=w>    </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=nx>error</span><span class=p>);</span>
</span><span id=__span-30-17><a id=__codelineno-30-17 name=__codelineno-30-17 href=#__codelineno-30-17></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-30-18><a id=__codelineno-30-18 name=__codelineno-30-18 href=#__codelineno-30-18></a><span class=p>}</span>
</span></code></pre></div> <h3 id=form-validation-errors>Form Validation Errors<a class=headerlink href=#form-validation-errors title="Permanent link">&para;</a></h3> <p>React Hook Form automatically displays Zod validation errors:</p> <div class="language-tsx highlight"><pre><span></span><code><span id=__span-31-1><a id=__codelineno-31-1 name=__codelineno-31-1 href=#__codelineno-31-1></a><span class=p>&lt;</span><span class=nt>form</span><span class=w> </span><span class=na>onSubmit</span><span class=o>=</span><span class=p>{</span><span class=nx>handleSubmit</span><span class=p>(</span><span class=nx>onSubmit</span><span class=p>)}&gt;</span>
</span><span id=__span-31-2><a id=__codelineno-31-2 name=__codelineno-31-2 href=#__codelineno-31-2></a><span class=w>  </span><span class=p>&lt;</span><span class=nt>input</span><span class=w> </span><span class=p>{</span><span class=na>...register</span><span class=err>(&#39;</span><span class=na>name</span><span class=err>&#39;)</span><span class=p>}</span><span class=w> </span><span class=p>/&gt;</span>
</span><span id=__span-31-3><a id=__codelineno-31-3 name=__codelineno-31-3 href=#__codelineno-31-3></a><span class=w>  </span><span class=p>{</span><span class=nx>errors</span><span class=p>.</span><span class=nx>name</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=p>(</span>
</span><span id=__span-31-4><a id=__codelineno-31-4 name=__codelineno-31-4 href=#__codelineno-31-4></a><span class=w>    </span><span class=p>&lt;</span><span class=nt>p</span><span class=w> </span><span class=na>className</span><span class=o>=</span><span class=s>&quot;text-red-500 text-sm&quot;</span><span class=p>&gt;{</span><span class=nx>errors</span><span class=p>.</span><span class=nx>name</span><span class=p>.</span><span class=nx>message</span><span class=p>}&lt;/</span><span class=nt>p</span><span class=p>&gt;</span>
</span><span id=__span-31-5><a id=__codelineno-31-5 name=__codelineno-31-5 href=#__codelineno-31-5></a><span class=w>  </span><span class=p>)}</span>
</span><span id=__span-31-6><a id=__codelineno-31-6 name=__codelineno-31-6 href=#__codelineno-31-6></a><span class=p>&lt;/</span><span class=nt>form</span><span class=p>&gt;</span>
</span></code></pre></div> <h2 id=optimistic-updates>Optimistic Updates<a class=headerlink href=#optimistic-updates title="Permanent link">&para;</a></h2> <p>For better UX, use SWR's optimistic updates:</p> <div class="language-typescript highlight"><pre><span></span><code><span id=__span-32-1><a id=__codelineno-32-1 name=__codelineno-32-1 href=#__codelineno-32-1></a><span class=k>import</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>mutate</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=kr>from</span><span class=w> </span><span class=s1>&#39;swr&#39;</span><span class=p>;</span>
</span><span id=__span-32-2><a id=__codelineno-32-2 name=__codelineno-32-2 href=#__codelineno-32-2></a>
</span><span id=__span-32-3><a id=__codelineno-32-3 name=__codelineno-32-3 href=#__codelineno-32-3></a><span class=k>async</span><span class=w> </span><span class=kd>function</span><span class=w> </span><span class=nx>deleteWorkoutType</span><span class=p>(</span><span class=nx>id</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-32-4><a id=__codelineno-32-4 name=__codelineno-32-4 href=#__codelineno-32-4></a><span class=w>  </span><span class=c1>// Optimistically update the UI</span>
</span><span id=__span-32-5><a id=__codelineno-32-5 name=__codelineno-32-5 href=#__codelineno-32-5></a><span class=w>  </span><span class=nx>mutate</span><span class=p>([</span><span class=s1>&#39;workoutTypes&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>user</span><span class=p>.</span><span class=nx>uid</span><span class=p>],</span><span class=w> </span>
</span><span id=__span-32-6><a id=__codelineno-32-6 name=__codelineno-32-6 href=#__codelineno-32-6></a><span class=w>    </span><span class=p>(</span><span class=nx>current</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>current</span><span class=o>?</span><span class=p>.</span><span class=nx>filter</span><span class=p>(</span><span class=kr>type</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=kr>type</span><span class=p>.</span><span class=nx>id</span><span class=w> </span><span class=o>!==</span><span class=w> </span><span class=nx>id</span><span class=p>),</span>
</span><span id=__span-32-7><a id=__codelineno-32-7 name=__codelineno-32-7 href=#__codelineno-32-7></a><span class=w>    </span><span class=kc>false</span><span class=w> </span><span class=c1>// Don&#39;t revalidate yet</span>
</span><span id=__span-32-8><a id=__codelineno-32-8 name=__codelineno-32-8 href=#__codelineno-32-8></a><span class=w>  </span><span class=p>);</span>
</span><span id=__span-32-9><a id=__codelineno-32-9 name=__codelineno-32-9 href=#__codelineno-32-9></a>
</span><span id=__span-32-10><a id=__codelineno-32-10 name=__codelineno-32-10 href=#__codelineno-32-10></a><span class=w>  </span><span class=k>try</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-32-11><a id=__codelineno-32-11 name=__codelineno-32-11 href=#__codelineno-32-11></a><span class=w>    </span><span class=c1>// Perform actual deletion</span>
</span><span id=__span-32-12><a id=__codelineno-32-12 name=__codelineno-32-12 href=#__codelineno-32-12></a><span class=w>    </span><span class=k>await</span><span class=w> </span><span class=nx>deleteDoc</span><span class=p>(</span><span class=nx>doc</span><span class=p>(</span><span class=nx>db</span><span class=p>,</span><span class=w> </span><span class=s1>&#39;workoutTypes&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>id</span><span class=p>));</span>
</span><span id=__span-32-13><a id=__codelineno-32-13 name=__codelineno-32-13 href=#__codelineno-32-13></a>
</span><span id=__span-32-14><a id=__codelineno-32-14 name=__codelineno-32-14 href=#__codelineno-32-14></a><span class=w>    </span><span class=c1>// Revalidate to ensure consistency</span>
</span><span id=__span-32-15><a id=__codelineno-32-15 name=__codelineno-32-15 href=#__codelineno-32-15></a><span class=w>    </span><span class=nx>mutate</span><span class=p>([</span><span class=s1>&#39;workoutTypes&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>user</span><span class=p>.</span><span class=nx>uid</span><span class=p>]);</span>
</span><span id=__span-32-16><a id=__codelineno-32-16 name=__codelineno-32-16 href=#__codelineno-32-16></a><span class=w>  </span><span class=p>}</span><span class=w> </span><span class=k>catch</span><span class=w> </span><span class=p>(</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-32-17><a id=__codelineno-32-17 name=__codelineno-32-17 href=#__codelineno-32-17></a><span class=w>    </span><span class=c1>// Rollback on error</span>
</span><span id=__span-32-18><a id=__codelineno-32-18 name=__codelineno-32-18 href=#__codelineno-32-18></a><span class=w>    </span><span class=nx>mutate</span><span class=p>([</span><span class=s1>&#39;workoutTypes&#39;</span><span class=p>,</span><span class=w> </span><span class=nx>user</span><span class=p>.</span><span class=nx>uid</span><span class=p>]);</span>
</span><span id=__span-32-19><a id=__codelineno-32-19 name=__codelineno-32-19 href=#__codelineno-32-19></a><span class=w>    </span><span class=k>throw</span><span class=w> </span><span class=nx>error</span><span class=p>;</span>
</span><span id=__span-32-20><a id=__codelineno-32-20 name=__codelineno-32-20 href=#__codelineno-32-20></a><span class=w>  </span><span class=p>}</span>
</span><span id=__span-32-21><a id=__codelineno-32-21 name=__codelineno-32-21 href=#__codelineno-32-21></a><span class=p>}</span>
</span></code></pre></div> <h2 id=data-aggregation>Data Aggregation<a class=headerlink href=#data-aggregation title="Permanent link">&para;</a></h2> <h3 id=calculate-total-volume>Calculate Total Volume<a class=headerlink href=#calculate-total-volume title="Permanent link">&para;</a></h3> <div class="language-typescript highlight"><pre><span></span><code><span id=__span-33-1><a id=__codelineno-33-1 name=__codelineno-33-1 href=#__codelineno-33-1></a><span class=kd>function</span><span class=w> </span><span class=nx>calculateTotalVolume</span><span class=p>(</span><span class=nx>session</span><span class=o>:</span><span class=w> </span><span class=kt>WorkoutSession</span><span class=p>)</span><span class=o>:</span><span class=w> </span><span class=kt>number</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-33-2><a id=__codelineno-33-2 name=__codelineno-33-2 href=#__codelineno-33-2></a><span class=w>  </span><span class=k>return</span><span class=w> </span><span class=nx>session</span><span class=p>.</span><span class=nx>exercises</span><span class=p>.</span><span class=nx>reduce</span><span class=p>((</span><span class=nx>total</span><span class=p>,</span><span class=w> </span><span class=nx>exercise</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-33-3><a id=__codelineno-33-3 name=__codelineno-33-3 href=#__codelineno-33-3></a><span class=w>    </span><span class=kd>const</span><span class=w> </span><span class=nx>exerciseVolume</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>exercise</span><span class=p>.</span><span class=nx>sets</span><span class=p>.</span><span class=nx>reduce</span><span class=p>((</span><span class=nx>sum</span><span class=p>,</span><span class=w> </span><span class=nx>set</span><span class=p>)</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-33-4><a id=__codelineno-33-4 name=__codelineno-33-4 href=#__codelineno-33-4></a><span class=w>      </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>set</span><span class=p>.</span><span class=nx>weight</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=nx>set</span><span class=p>.</span><span class=nx>reps</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-33-5><a id=__codelineno-33-5 name=__codelineno-33-5 href=#__codelineno-33-5></a><span class=w>        </span><span class=k>return</span><span class=w> </span><span class=nx>sum</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=p>(</span><span class=nx>set</span><span class=p>.</span><span class=nx>weight</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=nx>set</span><span class=p>.</span><span class=nx>reps</span><span class=p>);</span>
</span><span id=__span-33-6><a id=__codelineno-33-6 name=__codelineno-33-6 href=#__codelineno-33-6></a><span class=w>      </span><span class=p>}</span>
</span><span id=__span-33-7><a id=__codelineno-33-7 name=__codelineno-33-7 href=#__codelineno-33-7></a><span class=w>      </span><span class=k>return</span><span class=w> </span><span class=nx>sum</span><span class=p>;</span>
</span><span id=__span-33-8><a id=__codelineno-33-8 name=__codelineno-33-8 href=#__codelineno-33-8></a><span class=w>    </span><span class=p>},</span><span class=w> </span><span class=mf>0</span><span class=p>);</span>
</span><span id=__span-33-9><a id=__codelineno-33-9 name=__codelineno-33-9 href=#__codelineno-33-9></a><span class=w>    </span><span class=k>return</span><span class=w> </span><span class=nx>total</span><span class=w> </span><span class=o>+</span><span class=w> </span><span class=nx>exerciseVolume</span><span class=p>;</span>
</span><span id=__span-33-10><a id=__codelineno-33-10 name=__codelineno-33-10 href=#__codelineno-33-10></a><span class=w>  </span><span class=p>},</span><span class=w> </span><span class=mf>0</span><span class=p>);</span>
</span><span id=__span-33-11><a id=__codelineno-33-11 name=__codelineno-33-11 href=#__codelineno-33-11></a><span class=p>}</span>
</span></code></pre></div> <h3 id=calculate-personal-records>Calculate Personal Records<a class=headerlink href=#calculate-personal-records title="Permanent link">&para;</a></h3> <div class="language-typescript highlight"><pre><span></span><code><span id=__span-34-1><a id=__codelineno-34-1 name=__codelineno-34-1 href=#__codelineno-34-1></a><span class=kd>function</span><span class=w> </span><span class=nx>calculatePRs</span><span class=p>(</span><span class=nx>sessions</span><span class=o>:</span><span class=w> </span><span class=kt>WorkoutSession</span><span class=p>[],</span><span class=w> </span><span class=nx>workoutTypeId</span><span class=o>:</span><span class=w> </span><span class=kt>string</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-34-2><a id=__codelineno-34-2 name=__codelineno-34-2 href=#__codelineno-34-2></a><span class=w>  </span><span class=kd>let</span><span class=w> </span><span class=nx>maxWeight</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>0</span><span class=p>;</span>
</span><span id=__span-34-3><a id=__codelineno-34-3 name=__codelineno-34-3 href=#__codelineno-34-3></a><span class=w>  </span><span class=kd>let</span><span class=w> </span><span class=nx>maxReps</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>0</span><span class=p>;</span>
</span><span id=__span-34-4><a id=__codelineno-34-4 name=__codelineno-34-4 href=#__codelineno-34-4></a><span class=w>  </span><span class=kd>let</span><span class=w> </span><span class=nx>maxVolume</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=mf>0</span><span class=p>;</span>
</span><span id=__span-34-5><a id=__codelineno-34-5 name=__codelineno-34-5 href=#__codelineno-34-5></a>
</span><span id=__span-34-6><a id=__codelineno-34-6 name=__codelineno-34-6 href=#__codelineno-34-6></a><span class=w>  </span><span class=nx>sessions</span><span class=p>.</span><span class=nx>forEach</span><span class=p>(</span><span class=nx>session</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-34-7><a id=__codelineno-34-7 name=__codelineno-34-7 href=#__codelineno-34-7></a><span class=w>    </span><span class=nx>session</span><span class=p>.</span><span class=nx>exercises</span>
</span><span id=__span-34-8><a id=__codelineno-34-8 name=__codelineno-34-8 href=#__codelineno-34-8></a><span class=w>      </span><span class=p>.</span><span class=nx>filter</span><span class=p>(</span><span class=nx>ex</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>ex</span><span class=p>.</span><span class=nx>workoutTypeId</span><span class=w> </span><span class=o>===</span><span class=w> </span><span class=nx>workoutTypeId</span><span class=p>)</span>
</span><span id=__span-34-9><a id=__codelineno-34-9 name=__codelineno-34-9 href=#__codelineno-34-9></a><span class=w>      </span><span class=p>.</span><span class=nx>forEach</span><span class=p>(</span><span class=nx>exercise</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-34-10><a id=__codelineno-34-10 name=__codelineno-34-10 href=#__codelineno-34-10></a><span class=w>        </span><span class=nx>exercise</span><span class=p>.</span><span class=nx>sets</span><span class=p>.</span><span class=nx>forEach</span><span class=p>(</span><span class=nx>set</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-34-11><a id=__codelineno-34-11 name=__codelineno-34-11 href=#__codelineno-34-11></a><span class=w>          </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>set</span><span class=p>.</span><span class=nx>weight</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=nx>set</span><span class=p>.</span><span class=nx>weight</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=nx>maxWeight</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-34-12><a id=__codelineno-34-12 name=__codelineno-34-12 href=#__codelineno-34-12></a><span class=w>            </span><span class=nx>maxWeight</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>set</span><span class=p>.</span><span class=nx>weight</span><span class=p>;</span>
</span><span id=__span-34-13><a id=__codelineno-34-13 name=__codelineno-34-13 href=#__codelineno-34-13></a><span class=w>          </span><span class=p>}</span>
</span><span id=__span-34-14><a id=__codelineno-34-14 name=__codelineno-34-14 href=#__codelineno-34-14></a><span class=w>          </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>set</span><span class=p>.</span><span class=nx>reps</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=nx>set</span><span class=p>.</span><span class=nx>reps</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=nx>maxReps</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-34-15><a id=__codelineno-34-15 name=__codelineno-34-15 href=#__codelineno-34-15></a><span class=w>            </span><span class=nx>maxReps</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>set</span><span class=p>.</span><span class=nx>reps</span><span class=p>;</span>
</span><span id=__span-34-16><a id=__codelineno-34-16 name=__codelineno-34-16 href=#__codelineno-34-16></a><span class=w>          </span><span class=p>}</span>
</span><span id=__span-34-17><a id=__codelineno-34-17 name=__codelineno-34-17 href=#__codelineno-34-17></a><span class=w>          </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>set</span><span class=p>.</span><span class=nx>weight</span><span class=w> </span><span class=o>&amp;&amp;</span><span class=w> </span><span class=nx>set</span><span class=p>.</span><span class=nx>reps</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-34-18><a id=__codelineno-34-18 name=__codelineno-34-18 href=#__codelineno-34-18></a><span class=w>            </span><span class=kd>const</span><span class=w> </span><span class=nx>volume</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>set</span><span class=p>.</span><span class=nx>weight</span><span class=w> </span><span class=o>*</span><span class=w> </span><span class=nx>set</span><span class=p>.</span><span class=nx>reps</span><span class=p>;</span>
</span><span id=__span-34-19><a id=__codelineno-34-19 name=__codelineno-34-19 href=#__codelineno-34-19></a><span class=w>            </span><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>volume</span><span class=w> </span><span class=o>&gt;</span><span class=w> </span><span class=nx>maxVolume</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-34-20><a id=__codelineno-34-20 name=__codelineno-34-20 href=#__codelineno-34-20></a><span class=w>              </span><span class=nx>maxVolume</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>volume</span><span class=p>;</span>
</span><span id=__span-34-21><a id=__codelineno-34-21 name=__codelineno-34-21 href=#__codelineno-34-21></a><span class=w>            </span><span class=p>}</span>
</span><span id=__span-34-22><a id=__codelineno-34-22 name=__codelineno-34-22 href=#__codelineno-34-22></a><span class=w>          </span><span class=p>}</span>
</span><span id=__span-34-23><a id=__codelineno-34-23 name=__codelineno-34-23 href=#__codelineno-34-23></a><span class=w>        </span><span class=p>});</span>
</span><span id=__span-34-24><a id=__codelineno-34-24 name=__codelineno-34-24 href=#__codelineno-34-24></a><span class=w>      </span><span class=p>});</span>
</span><span id=__span-34-25><a id=__codelineno-34-25 name=__codelineno-34-25 href=#__codelineno-34-25></a><span class=w>  </span><span class=p>});</span>
</span><span id=__span-34-26><a id=__codelineno-34-26 name=__codelineno-34-26 href=#__codelineno-34-26></a>
</span><span id=__span-34-27><a id=__codelineno-34-27 name=__codelineno-34-27 href=#__codelineno-34-27></a><span class=w>  </span><span class=k>return</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>maxWeight</span><span class=p>,</span><span class=w> </span><span class=nx>maxReps</span><span class=p>,</span><span class=w> </span><span class=nx>maxVolume</span><span class=w> </span><span class=p>};</span>
</span><span id=__span-34-28><a id=__codelineno-34-28 name=__codelineno-34-28 href=#__codelineno-34-28></a><span class=p>}</span>
</span></code></pre></div> <h2 id=rate-limiting>Rate Limiting<a class=headerlink href=#rate-limiting title="Permanent link">&para;</a></h2> <p>Firebase has built-in rate limiting, but for additional protection:</p> <ol> <li><strong>Client-side debouncing</strong>: Prevent rapid-fire requests</li> <li><strong>SWR deduplication</strong>: Automatic request deduplication</li> <li><strong>Firebase App Check</strong>: Verify requests come from legitimate app</li> </ol> <h2 id=best-practices>Best Practices<a class=headerlink href=#best-practices title="Permanent link">&para;</a></h2> <h3 id=1-always-check-authentication>1. Always Check Authentication<a class=headerlink href=#1-always-check-authentication title="Permanent link">&para;</a></h3> <div class="language-typescript highlight"><pre><span></span><code><span id=__span-35-1><a id=__codelineno-35-1 name=__codelineno-35-1 href=#__codelineno-35-1></a><span class=kd>const</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>user</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useAuth</span><span class=p>();</span>
</span><span id=__span-35-2><a id=__codelineno-35-2 name=__codelineno-35-2 href=#__codelineno-35-2></a>
</span><span id=__span-35-3><a id=__codelineno-35-3 name=__codelineno-35-3 href=#__codelineno-35-3></a><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=o>!</span><span class=nx>user</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-35-4><a id=__codelineno-35-4 name=__codelineno-35-4 href=#__codelineno-35-4></a><span class=w>  </span><span class=k>return</span><span class=w> </span><span class=o>&lt;</span><span class=nx>div</span><span class=o>&gt;</span><span class=nx>Please</span><span class=w> </span><span class=nx>log</span><span class=w> </span><span class=ow>in</span><span class=o>&lt;</span><span class=err>/div&gt;;</span>
</span><span id=__span-35-5><a id=__codelineno-35-5 name=__codelineno-35-5 href=#__codelineno-35-5></a><span class=p>}</span>
</span></code></pre></div> <h3 id=2-use-typescript-types>2. Use TypeScript Types<a class=headerlink href=#2-use-typescript-types title="Permanent link">&para;</a></h3> <div class="language-typescript highlight"><pre><span></span><code><span id=__span-36-1><a id=__codelineno-36-1 name=__codelineno-36-1 href=#__codelineno-36-1></a><span class=c1>// Good: Type-safe</span>
</span><span id=__span-36-2><a id=__codelineno-36-2 name=__codelineno-36-2 href=#__codelineno-36-2></a><span class=kd>const</span><span class=w> </span><span class=nx>session</span><span class=o>:</span><span class=w> </span><span class=kt>WorkoutSession</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>getSession</span><span class=p>(</span><span class=nx>id</span><span class=p>);</span>
</span><span id=__span-36-3><a id=__codelineno-36-3 name=__codelineno-36-3 href=#__codelineno-36-3></a>
</span><span id=__span-36-4><a id=__codelineno-36-4 name=__codelineno-36-4 href=#__codelineno-36-4></a><span class=c1>// Bad: No type safety</span>
</span><span id=__span-36-5><a id=__codelineno-36-5 name=__codelineno-36-5 href=#__codelineno-36-5></a><span class=kd>const</span><span class=w> </span><span class=nx>session</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=k>await</span><span class=w> </span><span class=nx>getSession</span><span class=p>(</span><span class=nx>id</span><span class=p>);</span>
</span></code></pre></div> <h3 id=3-handle-loading-states>3. Handle Loading States<a class=headerlink href=#3-handle-loading-states title="Permanent link">&para;</a></h3> <div class="language-typescript highlight"><pre><span></span><code><span id=__span-37-1><a id=__codelineno-37-1 name=__codelineno-37-1 href=#__codelineno-37-1></a><span class=kd>const</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=nx>data</span><span class=p>,</span><span class=w> </span><span class=nx>isLoading</span><span class=p>,</span><span class=w> </span><span class=nx>error</span><span class=w> </span><span class=p>}</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>useWorkoutTypes</span><span class=p>();</span>
</span><span id=__span-37-2><a id=__codelineno-37-2 name=__codelineno-37-2 href=#__codelineno-37-2></a>
</span><span id=__span-37-3><a id=__codelineno-37-3 name=__codelineno-37-3 href=#__codelineno-37-3></a><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>isLoading</span><span class=p>)</span><span class=w> </span><span class=k>return</span><span class=w> </span><span class=o>&lt;</span><span class=nx>Skeleton</span><span class=w> </span><span class=o>/&gt;</span><span class=p>;</span>
</span><span id=__span-37-4><a id=__codelineno-37-4 name=__codelineno-37-4 href=#__codelineno-37-4></a><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=nx>error</span><span class=p>)</span><span class=w> </span><span class=k>return</span><span class=w> </span><span class=o>&lt;</span><span class=ne>Error</span><span class=w> </span><span class=o>/&gt;</span><span class=p>;</span>
</span><span id=__span-37-5><a id=__codelineno-37-5 name=__codelineno-37-5 href=#__codelineno-37-5></a><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=o>!</span><span class=nx>data</span><span class=p>)</span><span class=w> </span><span class=k>return</span><span class=w> </span><span class=kc>null</span><span class=p>;</span>
</span><span id=__span-37-6><a id=__codelineno-37-6 name=__codelineno-37-6 href=#__codelineno-37-6></a>
</span><span id=__span-37-7><a id=__codelineno-37-7 name=__codelineno-37-7 href=#__codelineno-37-7></a><span class=k>return</span><span class=w> </span><span class=o>&lt;</span><span class=nx>List</span><span class=w> </span><span class=nx>data</span><span class=o>=</span><span class=p>{</span><span class=nx>data</span><span class=p>}</span><span class=w> </span><span class=o>/&gt;</span><span class=p>;</span>
</span></code></pre></div> <h3 id=4-validate-user-input>4. Validate User Input<a class=headerlink href=#4-validate-user-input title="Permanent link">&para;</a></h3> <div class="language-typescript highlight"><pre><span></span><code><span id=__span-38-1><a id=__codelineno-38-1 name=__codelineno-38-1 href=#__codelineno-38-1></a><span class=c1>// Always validate with Zod before submitting</span>
</span><span id=__span-38-2><a id=__codelineno-38-2 name=__codelineno-38-2 href=#__codelineno-38-2></a><span class=kd>const</span><span class=w> </span><span class=nx>result</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>workoutTypeSchema</span><span class=p>.</span><span class=nx>safeParse</span><span class=p>(</span><span class=nx>formData</span><span class=p>);</span>
</span><span id=__span-38-3><a id=__codelineno-38-3 name=__codelineno-38-3 href=#__codelineno-38-3></a>
</span><span id=__span-38-4><a id=__codelineno-38-4 name=__codelineno-38-4 href=#__codelineno-38-4></a><span class=k>if</span><span class=w> </span><span class=p>(</span><span class=o>!</span><span class=nx>result</span><span class=p>.</span><span class=nx>success</span><span class=p>)</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-38-5><a id=__codelineno-38-5 name=__codelineno-38-5 href=#__codelineno-38-5></a><span class=w>  </span><span class=nx>console</span><span class=p>.</span><span class=nx>error</span><span class=p>(</span><span class=nx>result</span><span class=p>.</span><span class=nx>error</span><span class=p>);</span>
</span><span id=__span-38-6><a id=__codelineno-38-6 name=__codelineno-38-6 href=#__codelineno-38-6></a><span class=w>  </span><span class=k>return</span><span class=p>;</span>
</span><span id=__span-38-7><a id=__codelineno-38-7 name=__codelineno-38-7 href=#__codelineno-38-7></a><span class=p>}</span>
</span><span id=__span-38-8><a id=__codelineno-38-8 name=__codelineno-38-8 href=#__codelineno-38-8></a>
</span><span id=__span-38-9><a id=__codelineno-38-9 name=__codelineno-38-9 href=#__codelineno-38-9></a><span class=k>await</span><span class=w> </span><span class=nx>createWorkoutType</span><span class=p>(</span><span class=nx>result</span><span class=p>.</span><span class=nx>data</span><span class=p>);</span>
</span></code></pre></div> <h3 id=5-clean-up-listeners>5. Clean Up Listeners<a class=headerlink href=#5-clean-up-listeners title="Permanent link">&para;</a></h3> <div class="language-typescript highlight"><pre><span></span><code><span id=__span-39-1><a id=__codelineno-39-1 name=__codelineno-39-1 href=#__codelineno-39-1></a><span class=nx>useEffect</span><span class=p>(()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=p>{</span>
</span><span id=__span-39-2><a id=__codelineno-39-2 name=__codelineno-39-2 href=#__codelineno-39-2></a><span class=w>  </span><span class=kd>const</span><span class=w> </span><span class=nx>unsubscribe</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=nx>onSnapshot</span><span class=p>(</span><span class=nx>query</span><span class=p>,</span><span class=w> </span><span class=nx>callback</span><span class=p>);</span>
</span><span id=__span-39-3><a id=__codelineno-39-3 name=__codelineno-39-3 href=#__codelineno-39-3></a>
</span><span id=__span-39-4><a id=__codelineno-39-4 name=__codelineno-39-4 href=#__codelineno-39-4></a><span class=w>  </span><span class=c1>// Clean up on unmount</span>
</span><span id=__span-39-5><a id=__codelineno-39-5 name=__codelineno-39-5 href=#__codelineno-39-5></a><span class=w>  </span><span class=k>return</span><span class=w> </span><span class=p>()</span><span class=w> </span><span class=p>=&gt;</span><span class=w> </span><span class=nx>unsubscribe</span><span class=p>();</span>
</span><span id=__span-39-6><a id=__codelineno-39-6 name=__codelineno-39-6 href=#__codelineno-39-6></a><span class=p>},</span><span class=w> </span><span class=p>[]);</span>
</span></code></pre></div> <h2 id=future-api-enhancements>Future API Enhancements<a class=headerlink href=#future-api-enhancements title="Permanent link">&para;</a></h2> <p>See <a href=../ideas/ >ideas.md</a> for planned features:</p> <ul> <li><strong>REST API</strong>: Custom endpoints for complex operations</li> <li><strong>GraphQL</strong>: Flexible data fetching with Apollo</li> <li><strong>WebSockets</strong>: Real-time collaboration features</li> <li><strong>Cloud Functions</strong>: Server-side data processing</li> <li><strong>Analytics API</strong>: Advanced progress analytics</li> </ul> <hr> <p>This API documentation covers all current data models and operations in WorkTrack. For setup instructions, see <a href=../SETUP/ >SETUP.md</a>.</p> <aside class=md-source-file> <span class=md-source-file__fact> <span class=md-icon title="Last update"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg> </span> <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-datetime" title="October 2, 2025 13:58:13 UTC">October 2, 2025 13:58:13</span> </span> </aside> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../Architecture/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Architecture"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <div class=md-ellipsis> Architecture </div> </div> </a> <a href=../ideas/ class="md-footer__link md-footer__link--next" aria-label="Next: Ideas & Roadmap"> <div class=md-footer__title> <span class=md-footer__direction> Next </span> <div class=md-ellipsis> Ideas & Roadmap </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> Copyright &copy; 2025 Hope Kalitera </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://github.com/hopekali04/worktrack-docs target=_blank rel=noopener title="GitHub Repository" class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> <a href=https://twitter.com/worktrack target=_blank rel=noopener title="Follow us on Twitter" class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M459.4 151.7c.3 4.5.3 9.1.3 13.6 0 138.7-105.6 298.6-298.6 298.6-59.5 0-114.7-17.2-161.1-47.1 8.4 1 16.6 1.3 25.3 1.3 49.1 0 94.2-16.6 130.3-44.8-46.1-1-84.8-31.2-98.1-72.8 6.5 1 13 1.6 19.8 1.6 9.4 0 18.8-1.3 27.6-3.6-48.1-9.7-84.1-52-84.1-103v-1.3c14 7.8 30.2 12.7 47.4 13.3-28.3-18.8-46.8-51-46.8-87.4 0-19.5 5.2-37.4 14.3-53C87.4 130.8 165 172.4 252.1 176.9c-1.6-7.8-2.6-15.9-2.6-24C249.5 95.1 296.3 48 354.4 48c30.2 0 57.5 12.7 76.7 33.1 23.7-4.5 46.5-13.3 66.6-25.3-7.8 24.4-24.4 44.8-46.1 57.8 21.1-2.3 41.6-8.1 60.4-16.2-14.3 20.8-32.2 39.3-52.6 54.3"/></svg> </a> <a href=mailto:docs@worktrack.com target=_blank rel=noopener title="Contact us" class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M48 64C21.5 64 0 85.5 0 112c0 15.1 7.1 29.3 19.2 38.4l208 156a48 48 0 0 0 57.6 0l208-156c12.1-9.1 19.2-23.3 19.2-38.4 0-26.5-21.5-48-48-48zM0 196v188c0 35.3 28.7 64 64 64h384c35.3 0 64-28.7 64-64V196L313.6 344.8c-34.1 25.6-81.1 25.6-115.2 0z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <div class=md-consent data-md-component=consent id=__consent hidden> <div class=md-consent__overlay></div> <aside class=md-consent__inner> <form class="md-consent__form md-grid md-typeset" name=consent> <h4>Cookie Consent</h4> <p>We use cookies to recognize your repeated visits and preferences, as well as to measure the effectiveness of our documentation and whether users find what they're searching for. With your consent, you're helping us to make our documentation better.</p> <input class=md-toggle type=checkbox id=__settings> <div class=md-consent__settings> <ul class=task-list> <li class=task-list-item> <label class=task-list-control> <input type=checkbox name=github checked> <span class=task-list-indicator></span> GitHub </label> </li> </ul> </div> <div class=md-consent__controls> <button class="md-button md-button--primary">Accept</button> <label class=md-button for=__settings>Manage settings</label> </div> </form> </aside> </div> <script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout((function(){document.querySelector("[data-md-component=consent]").hidden=!1}),250);var form=document.forms.consent;for(var action of["submit","reset"])form.addEventListener(action,(function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map((function(e){return[e,!0]})))),location.hash="",location.reload()}))</script> <script id=__config type=application/json>{"base": "..", "features": ["navigation.instant", "navigation.instant.prefetch", "navigation.tracking", "navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.path", "navigation.indexes", "navigation.top", "navigation.footer", "toc.follow", "toc.integrate", "search.highlight", "search.share", "search.suggest", "header.autohide", "content.action.edit", "content.action.view", "content.code.copy", "content.code.select", "content.tooltips", "content.tabs.link"], "search": "../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"default": "stable", "provider": "mike"}}</script> <script src=../assets/javascripts/bundle.f55a23d4.min.js></script> <script src=../assets/js/mathjax.js></script> <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script> </body> </html>